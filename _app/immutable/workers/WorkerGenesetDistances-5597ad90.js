var ls=Object.defineProperty;var hs=(ft,ut,pt)=>ut in ft?ls(ft,ut,{enumerable:!0,configurable:!0,writable:!0,value:pt}):ft[ut]=pt;var br=(ft,ut,pt)=>(hs(ft,typeof ut!="symbol"?ut+"":ut,pt),pt),Ne=(ft,ut,pt)=>{if(!ut.has(ft))throw TypeError("Cannot "+pt)};var zt=(ft,ut,pt)=>(Ne(ft,ut,"read from private field"),pt?pt.call(ft):ut.get(ft)),Oe=(ft,ut,pt)=>{if(ut.has(ft))throw TypeError("Cannot add the same private member more than once");ut instanceof WeakSet?ut.add(ft):ut.set(ft,pt)},ve=(ft,ut,pt,ee)=>(Ne(ft,ut,"write to private field"),ee?ee.call(ft,pt):ut.set(ft,pt),pt);var De=(ft,ut,pt)=>(Ne(ft,ut,"access private method"),pt);(function(){var Jt,Be,Zt,wt;"use strict";function ft(i,n){let e=0;for(let t=0;t<i.length;t++)e+=(i[t]-n[t])*(i[t]-n[t]);return e}function ut(i,n){return Math.sqrt(ft(i,n))}function pt(i,n){const e=ee(i.length);for(let t=0;t<i.length;t++)for(let r=0;r<=t;r++)e[t][r]=n(i[t],i[r]),e[r][t]=e[t][r];return e}function ee(i){const n=[];for(let e=0;e<i;e++){const t=[];n.push(t);for(let r=0;r<i;r++)t.push(0)}return n}var Mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _r(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Ae(i){if(i.__esModule)return i;var n=i.default;if(typeof n=="function"){var e=function t(){return this instanceof t?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};e.prototype=n.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(i).forEach(function(t){var r=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return i[t]}})}),e}var nt={};const vr=Object.prototype.toString;function Vt(i){const n=vr.call(i);return n.endsWith("Array]")&&!n.includes("Big")}var kr=Object.freeze({__proto__:null,isAnyArray:Vt}),xr=Ae(kr);function Sr(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vt(i))throw new TypeError("input must be an array");if(i.length===0)throw new TypeError("input must not be empty");var e=n.fromIndex,t=e===void 0?0:e,r=n.toIndex,s=r===void 0?i.length:r;if(t<0||t>=i.length||!Number.isInteger(t))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=t||s>i.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=i[t],o=t+1;o<s;o++)i[o]>a&&(a=i[o]);return a}function Er(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vt(i))throw new TypeError("input must be an array");if(i.length===0)throw new TypeError("input must not be empty");var e=n.fromIndex,t=e===void 0?0:e,r=n.toIndex,s=r===void 0?i.length:r;if(t<0||t>=i.length||!Number.isInteger(t))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=t||s>i.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=i[t],o=t+1;o<s;o++)i[o]<a&&(a=i[o]);return a}function zr(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Vt(i)){if(i.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var e;if(n.output!==void 0){if(!Vt(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(i.length);var t=Er(i),r=Sr(i);if(t===r)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var s=n.min,a=s===void 0?n.autoMinMax?t:0:s,o=n.max,l=o===void 0?n.autoMinMax?r:1:o;if(a>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-a)/(r-t),p=0;p<i.length;p++)e[p]=(i[p]-t)*u+a;return e}var Mr=Object.freeze({__proto__:null,default:zr}),Cr=Ae(Mr);Object.defineProperty(nt,"__esModule",{value:!0});var yt=xr,Fe=Cr;const re=" ".repeat(2),Le=" ".repeat(4);function Ir(){return Pe(this)}function Pe(i,n={}){const{maxRows:e=15,maxColumns:t=10,maxNumSize:r=8,padMinus:s="auto"}=n;return`${i.constructor.name} {
${re}[
${Le}${Rr(i,e,t,r,s)}
${re}]
${re}rows: ${i.rows}
${re}columns: ${i.columns}
}`}function Rr(i,n,e,t,r){const{rows:s,columns:a}=i,o=Math.min(s,n),l=Math.min(a,e),u=[];if(r==="auto"){r=!1;t:for(let p=0;p<o;p++)for(let f=0;f<l;f++)if(i.get(p,f)<0){r=!0;break t}}for(let p=0;p<o;p++){let f=[];for(let b=0;b<l;b++)f.push(jr(i.get(p,b),t,r));u.push(`${f.join(" ")}`)}return l!==a&&(u[u.length-1]+=` ... ${a-e} more columns`),o!==s&&u.push(`... ${s-n} more rows`),u.join(`
${Le}`)}function jr(i,n,e){return(i>=0&&e?` ${Ue(i,n-1)}`:Ue(i,n)).padEnd(n)}function Ue(i,n){let e=i.toString();if(e.length<=n)return e;let t=i.toFixed(n);if(t.length>n&&(t=i.toFixed(Math.max(0,n-(t.length-n)))),t.length<=n&&!t.startsWith("0.000")&&!t.startsWith("-0.000"))return t;let r=i.toExponential(n);return r.length>n&&(r=i.toExponential(Math.max(0,n-(r.length-n)))),r.slice(0)}function Tr(i,n){i.prototype.add=function(t){return typeof t=="number"?this.addS(t):this.addM(t)},i.prototype.addS=function(t){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)+t);return this},i.prototype.addM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)+t.get(r,s));return this},i.add=function(t,r){return new n(t).add(r)},i.prototype.sub=function(t){return typeof t=="number"?this.subS(t):this.subM(t)},i.prototype.subS=function(t){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)-t);return this},i.prototype.subM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)-t.get(r,s));return this},i.sub=function(t,r){return new n(t).sub(r)},i.prototype.subtract=i.prototype.sub,i.prototype.subtractS=i.prototype.subS,i.prototype.subtractM=i.prototype.subM,i.subtract=i.sub,i.prototype.mul=function(t){return typeof t=="number"?this.mulS(t):this.mulM(t)},i.prototype.mulS=function(t){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)*t);return this},i.prototype.mulM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)*t.get(r,s));return this},i.mul=function(t,r){return new n(t).mul(r)},i.prototype.multiply=i.prototype.mul,i.prototype.multiplyS=i.prototype.mulS,i.prototype.multiplyM=i.prototype.mulM,i.multiply=i.mul,i.prototype.div=function(t){return typeof t=="number"?this.divS(t):this.divM(t)},i.prototype.divS=function(t){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)/t);return this},i.prototype.divM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)/t.get(r,s));return this},i.div=function(t,r){return new n(t).div(r)},i.prototype.divide=i.prototype.div,i.prototype.divideS=i.prototype.divS,i.prototype.divideM=i.prototype.divM,i.divide=i.div,i.prototype.mod=function(t){return typeof t=="number"?this.modS(t):this.modM(t)},i.prototype.modS=function(t){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)%t);return this},i.prototype.modM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)%t.get(r,s));return this},i.mod=function(t,r){return new n(t).mod(r)},i.prototype.modulus=i.prototype.mod,i.prototype.modulusS=i.prototype.modS,i.prototype.modulusM=i.prototype.modM,i.modulus=i.mod,i.prototype.and=function(t){return typeof t=="number"?this.andS(t):this.andM(t)},i.prototype.andS=function(t){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)&t);return this},i.prototype.andM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)&t.get(r,s));return this},i.and=function(t,r){return new n(t).and(r)},i.prototype.or=function(t){return typeof t=="number"?this.orS(t):this.orM(t)},i.prototype.orS=function(t){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)|t);return this},i.prototype.orM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)|t.get(r,s));return this},i.or=function(t,r){return new n(t).or(r)},i.prototype.xor=function(t){return typeof t=="number"?this.xorS(t):this.xorM(t)},i.prototype.xorS=function(t){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)^t);return this},i.prototype.xorM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)^t.get(r,s));return this},i.xor=function(t,r){return new n(t).xor(r)},i.prototype.leftShift=function(t){return typeof t=="number"?this.leftShiftS(t):this.leftShiftM(t)},i.prototype.leftShiftS=function(t){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)<<t);return this},i.prototype.leftShiftM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)<<t.get(r,s));return this},i.leftShift=function(t,r){return new n(t).leftShift(r)},i.prototype.signPropagatingRightShift=function(t){return typeof t=="number"?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},i.prototype.signPropagatingRightShiftS=function(t){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>t);return this},i.prototype.signPropagatingRightShiftM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>t.get(r,s));return this},i.signPropagatingRightShift=function(t,r){return new n(t).signPropagatingRightShift(r)},i.prototype.rightShift=function(t){return typeof t=="number"?this.rightShiftS(t):this.rightShiftM(t)},i.prototype.rightShiftS=function(t){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>>t);return this},i.prototype.rightShiftM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>>t.get(r,s));return this},i.rightShift=function(t,r){return new n(t).rightShift(r)},i.prototype.zeroFillRightShift=i.prototype.rightShift,i.prototype.zeroFillRightShiftS=i.prototype.rightShiftS,i.prototype.zeroFillRightShiftM=i.prototype.rightShiftM,i.zeroFillRightShift=i.rightShift,i.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,~this.get(t,r));return this},i.not=function(t){return new n(t).not()},i.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.abs(this.get(t,r)));return this},i.abs=function(t){return new n(t).abs()},i.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.acos(this.get(t,r)));return this},i.acos=function(t){return new n(t).acos()},i.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.acosh(this.get(t,r)));return this},i.acosh=function(t){return new n(t).acosh()},i.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.asin(this.get(t,r)));return this},i.asin=function(t){return new n(t).asin()},i.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.asinh(this.get(t,r)));return this},i.asinh=function(t){return new n(t).asinh()},i.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.atan(this.get(t,r)));return this},i.atan=function(t){return new n(t).atan()},i.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.atanh(this.get(t,r)));return this},i.atanh=function(t){return new n(t).atanh()},i.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.cbrt(this.get(t,r)));return this},i.cbrt=function(t){return new n(t).cbrt()},i.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.ceil(this.get(t,r)));return this},i.ceil=function(t){return new n(t).ceil()},i.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.clz32(this.get(t,r)));return this},i.clz32=function(t){return new n(t).clz32()},i.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.cos(this.get(t,r)));return this},i.cos=function(t){return new n(t).cos()},i.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.cosh(this.get(t,r)));return this},i.cosh=function(t){return new n(t).cosh()},i.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.exp(this.get(t,r)));return this},i.exp=function(t){return new n(t).exp()},i.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.expm1(this.get(t,r)));return this},i.expm1=function(t){return new n(t).expm1()},i.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.floor(this.get(t,r)));return this},i.floor=function(t){return new n(t).floor()},i.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.fround(this.get(t,r)));return this},i.fround=function(t){return new n(t).fround()},i.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.log(this.get(t,r)));return this},i.log=function(t){return new n(t).log()},i.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.log1p(this.get(t,r)));return this},i.log1p=function(t){return new n(t).log1p()},i.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.log10(this.get(t,r)));return this},i.log10=function(t){return new n(t).log10()},i.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.log2(this.get(t,r)));return this},i.log2=function(t){return new n(t).log2()},i.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.round(this.get(t,r)));return this},i.round=function(t){return new n(t).round()},i.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.sign(this.get(t,r)));return this},i.sign=function(t){return new n(t).sign()},i.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.sin(this.get(t,r)));return this},i.sin=function(t){return new n(t).sin()},i.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.sinh(this.get(t,r)));return this},i.sinh=function(t){return new n(t).sinh()},i.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.sqrt(this.get(t,r)));return this},i.sqrt=function(t){return new n(t).sqrt()},i.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.tan(this.get(t,r)));return this},i.tan=function(t){return new n(t).tan()},i.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.tanh(this.get(t,r)));return this},i.tanh=function(t){return new n(t).tanh()},i.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.trunc(this.get(t,r)));return this},i.trunc=function(t){return new n(t).trunc()},i.pow=function(t,r){return new n(t).pow(r)},i.prototype.pow=function(t){return typeof t=="number"?this.powS(t):this.powM(t)},i.prototype.powS=function(t){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,Math.pow(this.get(r,s),t));return this},i.prototype.powM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,Math.pow(this.get(r,s),t.get(r,s)));return this}}function vt(i,n,e){let t=e?i.rows:i.rows-1;if(n<0||n>t)throw new RangeError("Row index out of range")}function kt(i,n,e){let t=e?i.columns:i.columns-1;if(n<0||n>t)throw new RangeError("Column index out of range")}function Lt(i,n){if(n.to1DArray&&(n=n.to1DArray()),n.length!==i.columns)throw new RangeError("vector size must be the same as the number of columns");return n}function Pt(i,n){if(n.to1DArray&&(n=n.to1DArray()),n.length!==i.rows)throw new RangeError("vector size must be the same as the number of rows");return n}function ke(i,n){if(!yt.isAnyArray(n))throw new TypeError("row indices must be an array");for(let e=0;e<n.length;e++)if(n[e]<0||n[e]>=i.rows)throw new RangeError("row indices are out of range")}function xe(i,n){if(!yt.isAnyArray(n))throw new TypeError("column indices must be an array");for(let e=0;e<n.length;e++)if(n[e]<0||n[e]>=i.columns)throw new RangeError("column indices are out of range")}function Se(i,n,e,t,r){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(se("startRow",n),se("endRow",e),se("startColumn",t),se("endColumn",r),n>e||t>r||n<0||n>=i.rows||e<0||e>=i.rows||t<0||t>=i.columns||r<0||r>=i.columns)throw new RangeError("Submatrix indices are out of range")}function ne(i,n=0){let e=[];for(let t=0;t<i;t++)e.push(n);return e}function se(i,n){if(typeof n!="number")throw new TypeError(`${i} must be a number`)}function Ut(i){if(i.isEmpty())throw new Error("Empty matrix has no elements to index")}function Nr(i){let n=ne(i.rows);for(let e=0;e<i.rows;++e)for(let t=0;t<i.columns;++t)n[e]+=i.get(e,t);return n}function Or(i){let n=ne(i.columns);for(let e=0;e<i.rows;++e)for(let t=0;t<i.columns;++t)n[t]+=i.get(e,t);return n}function Dr(i){let n=0;for(let e=0;e<i.rows;e++)for(let t=0;t<i.columns;t++)n+=i.get(e,t);return n}function Br(i){let n=ne(i.rows,1);for(let e=0;e<i.rows;++e)for(let t=0;t<i.columns;++t)n[e]*=i.get(e,t);return n}function Ar(i){let n=ne(i.columns,1);for(let e=0;e<i.rows;++e)for(let t=0;t<i.columns;++t)n[t]*=i.get(e,t);return n}function Fr(i){let n=1;for(let e=0;e<i.rows;e++)for(let t=0;t<i.columns;t++)n*=i.get(e,t);return n}function Lr(i,n,e){const t=i.rows,r=i.columns,s=[];for(let a=0;a<t;a++){let o=0,l=0,u=0;for(let p=0;p<r;p++)u=i.get(a,p)-e[a],o+=u,l+=u*u;n?s.push((l-o*o/r)/(r-1)):s.push((l-o*o/r)/r)}return s}function Pr(i,n,e){const t=i.rows,r=i.columns,s=[];for(let a=0;a<r;a++){let o=0,l=0,u=0;for(let p=0;p<t;p++)u=i.get(p,a)-e[a],o+=u,l+=u*u;n?s.push((l-o*o/t)/(t-1)):s.push((l-o*o/t)/t)}return s}function Ur(i,n,e){const t=i.rows,r=i.columns,s=t*r;let a=0,o=0,l=0;for(let u=0;u<t;u++)for(let p=0;p<r;p++)l=i.get(u,p)-e,a+=l,o+=l*l;return n?(o-a*a/s)/(s-1):(o-a*a/s)/s}function $r(i,n){for(let e=0;e<i.rows;e++)for(let t=0;t<i.columns;t++)i.set(e,t,i.get(e,t)-n[e])}function qr(i,n){for(let e=0;e<i.rows;e++)for(let t=0;t<i.columns;t++)i.set(e,t,i.get(e,t)-n[t])}function Wr(i,n){for(let e=0;e<i.rows;e++)for(let t=0;t<i.columns;t++)i.set(e,t,i.get(e,t)-n)}function Zr(i){const n=[];for(let e=0;e<i.rows;e++){let t=0;for(let r=0;r<i.columns;r++)t+=Math.pow(i.get(e,r),2)/(i.columns-1);n.push(Math.sqrt(t))}return n}function Vr(i,n){for(let e=0;e<i.rows;e++)for(let t=0;t<i.columns;t++)i.set(e,t,i.get(e,t)/n[e])}function Gr(i){const n=[];for(let e=0;e<i.columns;e++){let t=0;for(let r=0;r<i.rows;r++)t+=Math.pow(i.get(r,e),2)/(i.rows-1);n.push(Math.sqrt(t))}return n}function Yr(i,n){for(let e=0;e<i.rows;e++)for(let t=0;t<i.columns;t++)i.set(e,t,i.get(e,t)/n[t])}function Kr(i){const n=i.size-1;let e=0;for(let t=0;t<i.columns;t++)for(let r=0;r<i.rows;r++)e+=Math.pow(i.get(r,t),2)/n;return Math.sqrt(e)}function Xr(i,n){for(let e=0;e<i.rows;e++)for(let t=0;t<i.columns;t++)i.set(e,t,i.get(e,t)/n)}class rt{static from1DArray(n,e,t){if(n*e!==t.length)throw new RangeError("data length does not match given dimensions");let s=new X(n,e);for(let a=0;a<n;a++)for(let o=0;o<e;o++)s.set(a,o,t[a*e+o]);return s}static rowVector(n){let e=new X(1,n.length);for(let t=0;t<n.length;t++)e.set(0,t,n[t]);return e}static columnVector(n){let e=new X(n.length,1);for(let t=0;t<n.length;t++)e.set(t,0,n[t]);return e}static zeros(n,e){return new X(n,e)}static ones(n,e){return new X(n,e).fill(1)}static rand(n,e,t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{random:r=Math.random}=t;let s=new X(n,e);for(let a=0;a<n;a++)for(let o=0;o<e;o++)s.set(a,o,r());return s}static randInt(n,e,t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{min:r=0,max:s=1e3,random:a=Math.random}=t;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(s))throw new TypeError("max must be an integer");if(r>=s)throw new RangeError("min must be smaller than max");let o=s-r,l=new X(n,e);for(let u=0;u<n;u++)for(let p=0;p<e;p++){let f=r+Math.round(a()*o);l.set(u,p,f)}return l}static eye(n,e,t){e===void 0&&(e=n),t===void 0&&(t=1);let r=Math.min(n,e),s=this.zeros(n,e);for(let a=0;a<r;a++)s.set(a,a,t);return s}static diag(n,e,t){let r=n.length;e===void 0&&(e=r),t===void 0&&(t=e);let s=Math.min(r,e,t),a=this.zeros(e,t);for(let o=0;o<s;o++)a.set(o,o,n[o]);return a}static min(n,e){n=this.checkMatrix(n),e=this.checkMatrix(e);let t=n.rows,r=n.columns,s=new X(t,r);for(let a=0;a<t;a++)for(let o=0;o<r;o++)s.set(a,o,Math.min(n.get(a,o),e.get(a,o)));return s}static max(n,e){n=this.checkMatrix(n),e=this.checkMatrix(e);let t=n.rows,r=n.columns,s=new this(t,r);for(let a=0;a<t;a++)for(let o=0;o<r;o++)s.set(a,o,Math.max(n.get(a,o),e.get(a,o)));return s}static checkMatrix(n){return rt.isMatrix(n)?n:new X(n)}static isMatrix(n){return n!=null&&n.klass==="Matrix"}get size(){return this.rows*this.columns}apply(n){if(typeof n!="function")throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)n.call(this,e,t);return this}to1DArray(){let n=[];for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)n.push(this.get(e,t));return n}to2DArray(){let n=[];for(let e=0;e<this.rows;e++){n.push([]);for(let t=0;t<this.columns;t++)n[e].push(this.get(e,t))}return n}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let n=0;n<this.rows;n++)for(let e=0;e<=n;e++)if(this.get(n,e)!==this.get(e,n))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let n=0;n<this.rows;n++)if(this.get(n,n)!==0)return!1;return!0}isEchelonForm(){let n=0,e=0,t=-1,r=!0,s=!1;for(;n<this.rows&&r;){for(e=0,s=!1;e<this.columns&&s===!1;)this.get(n,e)===0?e++:this.get(n,e)===1&&e>t?(s=!0,t=e):(r=!1,s=!0);n++}return r}isReducedEchelonForm(){let n=0,e=0,t=-1,r=!0,s=!1;for(;n<this.rows&&r;){for(e=0,s=!1;e<this.columns&&s===!1;)this.get(n,e)===0?e++:this.get(n,e)===1&&e>t?(s=!0,t=e):(r=!1,s=!0);for(let a=e+1;a<this.rows;a++)this.get(n,a)!==0&&(r=!1);n++}return r}echelonForm(){let n=this.clone(),e=0,t=0;for(;e<n.rows&&t<n.columns;){let r=e;for(let s=e;s<n.rows;s++)n.get(s,t)>n.get(r,t)&&(r=s);if(n.get(r,t)===0)t++;else{n.swapRows(e,r);let s=n.get(e,t);for(let a=t;a<n.columns;a++)n.set(e,a,n.get(e,a)/s);for(let a=e+1;a<n.rows;a++){let o=n.get(a,t)/n.get(e,t);n.set(a,t,0);for(let l=t+1;l<n.columns;l++)n.set(a,l,n.get(a,l)-n.get(e,l)*o)}e++,t++}}return n}reducedEchelonForm(){let n=this.echelonForm(),e=n.columns,t=n.rows,r=t-1;for(;r>=0;)if(n.maxRow(r)===0)r--;else{let s=0,a=!1;for(;s<t&&a===!1;)n.get(r,s)===1?a=!0:s++;for(let o=0;o<r;o++){let l=n.get(o,s);for(let u=s;u<e;u++){let p=n.get(o,u)-l*n.get(r,u);n.set(o,u,p)}}r--}return n}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{rows:e=1,columns:t=1}=n;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(t)||t<=0)throw new TypeError("columns must be a positive integer");let r=new X(this.rows*e,this.columns*t);for(let s=0;s<e;s++)for(let a=0;a<t;a++)r.setSubMatrix(this,this.rows*s,this.columns*a);return r}fill(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,n);return this}neg(){return this.mulS(-1)}getRow(n){vt(this,n);let e=[];for(let t=0;t<this.columns;t++)e.push(this.get(n,t));return e}getRowVector(n){return X.rowVector(this.getRow(n))}setRow(n,e){vt(this,n),e=Lt(this,e);for(let t=0;t<this.columns;t++)this.set(n,t,e[t]);return this}swapRows(n,e){vt(this,n),vt(this,e);for(let t=0;t<this.columns;t++){let r=this.get(n,t);this.set(n,t,this.get(e,t)),this.set(e,t,r)}return this}getColumn(n){kt(this,n);let e=[];for(let t=0;t<this.rows;t++)e.push(this.get(t,n));return e}getColumnVector(n){return X.columnVector(this.getColumn(n))}setColumn(n,e){kt(this,n),e=Pt(this,e);for(let t=0;t<this.rows;t++)this.set(t,n,e[t]);return this}swapColumns(n,e){kt(this,n),kt(this,e);for(let t=0;t<this.rows;t++){let r=this.get(t,n);this.set(t,n,this.get(t,e)),this.set(t,e,r)}return this}addRowVector(n){n=Lt(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+n[t]);return this}subRowVector(n){n=Lt(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-n[t]);return this}mulRowVector(n){n=Lt(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*n[t]);return this}divRowVector(n){n=Lt(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/n[t]);return this}addColumnVector(n){n=Pt(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+n[e]);return this}subColumnVector(n){n=Pt(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-n[e]);return this}mulColumnVector(n){n=Pt(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*n[e]);return this}divColumnVector(n){n=Pt(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/n[e]);return this}mulRow(n,e){vt(this,n);for(let t=0;t<this.columns;t++)this.set(n,t,this.get(n,t)*e);return this}mulColumn(n,e){kt(this,n);for(let t=0;t<this.rows;t++)this.set(t,n,this.get(t,n)*e);return this}max(n){if(this.isEmpty())return NaN;switch(n){case"row":{const e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.get(t,r)>e[t]&&(e[t]=this.get(t,r));return e}case"column":{const e=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.get(t,r)>e[r]&&(e[r]=this.get(t,r));return e}case void 0:{let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}default:throw new Error(`invalid option: ${n}`)}}maxIndex(){Ut(this);let n=this.get(0,0),e=[0,0];for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.get(t,r)>n&&(n=this.get(t,r),e[0]=t,e[1]=r);return e}min(n){if(this.isEmpty())return NaN;switch(n){case"row":{const e=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.get(t,r)<e[t]&&(e[t]=this.get(t,r));return e}case"column":{const e=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.get(t,r)<e[r]&&(e[r]=this.get(t,r));return e}case void 0:{let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}default:throw new Error(`invalid option: ${n}`)}}minIndex(){Ut(this);let n=this.get(0,0),e=[0,0];for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.get(t,r)<n&&(n=this.get(t,r),e[0]=t,e[1]=r);return e}maxRow(n){if(vt(this,n),this.isEmpty())return NaN;let e=this.get(n,0);for(let t=1;t<this.columns;t++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxRowIndex(n){vt(this,n),Ut(this);let e=this.get(n,0),t=[n,0];for(let r=1;r<this.columns;r++)this.get(n,r)>e&&(e=this.get(n,r),t[1]=r);return t}minRow(n){if(vt(this,n),this.isEmpty())return NaN;let e=this.get(n,0);for(let t=1;t<this.columns;t++)this.get(n,t)<e&&(e=this.get(n,t));return e}minRowIndex(n){vt(this,n),Ut(this);let e=this.get(n,0),t=[n,0];for(let r=1;r<this.columns;r++)this.get(n,r)<e&&(e=this.get(n,r),t[1]=r);return t}maxColumn(n){if(kt(this,n),this.isEmpty())return NaN;let e=this.get(0,n);for(let t=1;t<this.rows;t++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxColumnIndex(n){kt(this,n),Ut(this);let e=this.get(0,n),t=[0,n];for(let r=1;r<this.rows;r++)this.get(r,n)>e&&(e=this.get(r,n),t[0]=r);return t}minColumn(n){if(kt(this,n),this.isEmpty())return NaN;let e=this.get(0,n);for(let t=1;t<this.rows;t++)this.get(t,n)<e&&(e=this.get(t,n));return e}minColumnIndex(n){kt(this,n),Ut(this);let e=this.get(0,n),t=[0,n];for(let r=1;r<this.rows;r++)this.get(r,n)<e&&(e=this.get(r,n),t[0]=r);return t}diag(){let n=Math.min(this.rows,this.columns),e=[];for(let t=0;t<n;t++)e.push(this.get(t,t));return e}norm(n="frobenius"){switch(n){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${n}`)}}cumulativeSum(){let n=0;for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)n+=this.get(e,t),this.set(e,t,n);return this}dot(n){rt.isMatrix(n)&&(n=n.to1DArray());let e=this.to1DArray();if(e.length!==n.length)throw new RangeError("vectors do not have the same size");let t=0;for(let r=0;r<e.length;r++)t+=e[r]*n[r];return t}mmul(n){n=X.checkMatrix(n);let e=this.rows,t=this.columns,r=n.columns,s=new X(e,r),a=new Float64Array(t);for(let o=0;o<r;o++){for(let l=0;l<t;l++)a[l]=n.get(l,o);for(let l=0;l<e;l++){let u=0;for(let p=0;p<t;p++)u+=this.get(l,p)*a[p];s.set(l,o,u)}}return s}strassen2x2(n){n=X.checkMatrix(n);let e=new X(2,2);const t=this.get(0,0),r=n.get(0,0),s=this.get(0,1),a=n.get(0,1),o=this.get(1,0),l=n.get(1,0),u=this.get(1,1),p=n.get(1,1),f=(t+u)*(r+p),b=(o+u)*r,m=t*(a-p),y=u*(l-r),d=(t+s)*p,_=(o-t)*(r+a),h=(s-u)*(l+p),g=f+y-d+h,v=m+d,E=b+y,M=f-b+m+_;return e.set(0,0,g),e.set(0,1,v),e.set(1,0,E),e.set(1,1,M),e}strassen3x3(n){n=X.checkMatrix(n);let e=new X(3,3);const t=this.get(0,0),r=this.get(0,1),s=this.get(0,2),a=this.get(1,0),o=this.get(1,1),l=this.get(1,2),u=this.get(2,0),p=this.get(2,1),f=this.get(2,2),b=n.get(0,0),m=n.get(0,1),y=n.get(0,2),d=n.get(1,0),_=n.get(1,1),h=n.get(1,2),g=n.get(2,0),v=n.get(2,1),E=n.get(2,2),M=(t+r+s-a-o-p-f)*_,j=(t-a)*(-m+_),I=o*(-b+m+d-_-h-g+E),T=(-t+a+o)*(b-m+_),N=(a+o)*(-b+m),k=t*b,O=(-t+u+p)*(b-y+h),x=(-t+u)*(y-h),C=(u+p)*(-b+y),w=(t+r+s-o-l-u-p)*h,F=p*(-b+y+d-_-h-g+v),J=(-s+p+f)*(_+g-v),P=(s-f)*(_-v),tt=s*g,q=(p+f)*(-g+v),Q=(-s+o+l)*(h+g-E),A=(s-l)*(h-E),D=(o+l)*(-g+E),V=r*d,Y=l*v,Z=a*y,ot=u*m,st=f*E,it=k+tt+V,lt=M+T+N+k+J+tt+q,mt=k+O+C+w+tt+Q+D,ct=j+I+T+k+tt+Q+A,xt=j+T+N+k+Y,_t=tt+Q+A+D+Z,c=k+O+x+F+J+P+tt,U=J+P+tt+q+ot,L=k+O+x+C+st;return e.set(0,0,it),e.set(0,1,lt),e.set(0,2,mt),e.set(1,0,ct),e.set(1,1,xt),e.set(1,2,_t),e.set(2,0,c),e.set(2,1,U),e.set(2,2,L),e}mmulStrassen(n){n=X.checkMatrix(n);let e=this.clone(),t=e.rows,r=e.columns,s=n.rows,a=n.columns;r!==s&&console.warn(`Multiplying ${t} x ${r} and ${s} x ${a} matrix: dimensions do not match.`);function o(f,b,m){let y=f.rows,d=f.columns;if(y===b&&d===m)return f;{let _=rt.zeros(b,m);return _=_.setSubMatrix(f,0,0),_}}let l=Math.max(t,s),u=Math.max(r,a);e=o(e,l,u),n=o(n,l,u);function p(f,b,m,y){if(m<=512||y<=512)return f.mmul(b);m%2===1&&y%2===1?(f=o(f,m+1,y+1),b=o(b,m+1,y+1)):m%2===1?(f=o(f,m+1,y),b=o(b,m+1,y)):y%2===1&&(f=o(f,m,y+1),b=o(b,m,y+1));let d=parseInt(f.rows/2,10),_=parseInt(f.columns/2,10),h=f.subMatrix(0,d-1,0,_-1),g=b.subMatrix(0,d-1,0,_-1),v=f.subMatrix(0,d-1,_,f.columns-1),E=b.subMatrix(0,d-1,_,b.columns-1),M=f.subMatrix(d,f.rows-1,0,_-1),j=b.subMatrix(d,b.rows-1,0,_-1),I=f.subMatrix(d,f.rows-1,_,f.columns-1),T=b.subMatrix(d,b.rows-1,_,b.columns-1),N=p(rt.add(h,I),rt.add(g,T),d,_),k=p(rt.add(M,I),g,d,_),O=p(h,rt.sub(E,T),d,_),x=p(I,rt.sub(j,g),d,_),C=p(rt.add(h,v),T,d,_),w=p(rt.sub(M,h),rt.add(g,E),d,_),F=p(rt.sub(v,I),rt.add(j,T),d,_),J=rt.add(N,x);J.sub(C),J.add(F);let P=rt.add(O,C),tt=rt.add(k,x),q=rt.sub(N,k);q.add(O),q.add(w);let Q=rt.zeros(2*J.rows,2*J.columns);return Q=Q.setSubMatrix(J,0,0),Q=Q.setSubMatrix(P,J.rows,0),Q=Q.setSubMatrix(tt,0,J.columns),Q=Q.setSubMatrix(q,J.rows,J.columns),Q.subMatrix(0,m-1,0,y-1)}return p(e,n,l,u)}scaleRows(n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:e=0,max:t=1}=n;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(t))throw new TypeError("max must be a number");if(e>=t)throw new RangeError("min must be smaller than max");let r=new X(this.rows,this.columns);for(let s=0;s<this.rows;s++){const a=this.getRow(s);a.length>0&&Fe(a,{min:e,max:t,output:a}),r.setRow(s,a)}return r}scaleColumns(n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:e=0,max:t=1}=n;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(t))throw new TypeError("max must be a number");if(e>=t)throw new RangeError("min must be smaller than max");let r=new X(this.rows,this.columns);for(let s=0;s<this.columns;s++){const a=this.getColumn(s);a.length&&Fe(a,{min:e,max:t,output:a}),r.setColumn(s,a)}return r}flipRows(){const n=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let t=0;t<n;t++){let r=this.get(e,t),s=this.get(e,this.columns-1-t);this.set(e,t,s),this.set(e,this.columns-1-t,r)}return this}flipColumns(){const n=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let t=0;t<n;t++){let r=this.get(t,e),s=this.get(this.rows-1-t,e);this.set(t,e,s),this.set(this.rows-1-t,e,r)}return this}kroneckerProduct(n){n=X.checkMatrix(n);let e=this.rows,t=this.columns,r=n.rows,s=n.columns,a=new X(e*r,t*s);for(let o=0;o<e;o++)for(let l=0;l<t;l++)for(let u=0;u<r;u++)for(let p=0;p<s;p++)a.set(r*o+u,s*l+p,this.get(o,l)*n.get(u,p));return a}kroneckerSum(n){if(n=X.checkMatrix(n),!this.isSquare()||!n.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,t=n.rows,r=this.kroneckerProduct(X.eye(t,t)),s=X.eye(e,e).kroneckerProduct(n);return r.add(s)}transpose(){let n=new X(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)n.set(t,e,this.get(e,t));return n}sortRows(n=$e){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(n));return this}sortColumns(n=$e){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(n));return this}subMatrix(n,e,t,r){Se(this,n,e,t,r);let s=new X(e-n+1,r-t+1);for(let a=n;a<=e;a++)for(let o=t;o<=r;o++)s.set(a-n,o-t,this.get(a,o));return s}subMatrixRow(n,e,t){if(e===void 0&&(e=0),t===void 0&&(t=this.columns-1),e>t||e<0||e>=this.columns||t<0||t>=this.columns)throw new RangeError("Argument out of range");let r=new X(n.length,t-e+1);for(let s=0;s<n.length;s++)for(let a=e;a<=t;a++){if(n[s]<0||n[s]>=this.rows)throw new RangeError(`Row index out of range: ${n[s]}`);r.set(s,a-e,this.get(n[s],a))}return r}subMatrixColumn(n,e,t){if(e===void 0&&(e=0),t===void 0&&(t=this.rows-1),e>t||e<0||e>=this.rows||t<0||t>=this.rows)throw new RangeError("Argument out of range");let r=new X(t-e+1,n.length);for(let s=0;s<n.length;s++)for(let a=e;a<=t;a++){if(n[s]<0||n[s]>=this.columns)throw new RangeError(`Column index out of range: ${n[s]}`);r.set(a-e,s,this.get(a,n[s]))}return r}setSubMatrix(n,e,t){if(n=X.checkMatrix(n),n.isEmpty())return this;let r=e+n.rows-1,s=t+n.columns-1;Se(this,e,r,t,s);for(let a=0;a<n.rows;a++)for(let o=0;o<n.columns;o++)this.set(e+a,t+o,n.get(a,o));return this}selection(n,e){ke(this,n),xe(this,e);let t=new X(n.length,e.length);for(let r=0;r<n.length;r++){let s=n[r];for(let a=0;a<e.length;a++){let o=e[a];t.set(r,a,this.get(s,o))}}return t}trace(){let n=Math.min(this.rows,this.columns),e=0;for(let t=0;t<n;t++)e+=this.get(t,t);return e}clone(){return this.constructor.copy(this,new X(this.rows,this.columns))}static copy(n,e){for(const[t,r,s]of n.entries())e.set(t,r,s);return e}sum(n){switch(n){case"row":return Nr(this);case"column":return Or(this);case void 0:return Dr(this);default:throw new Error(`invalid option: ${n}`)}}product(n){switch(n){case"row":return Br(this);case"column":return Ar(this);case void 0:return Fr(this);default:throw new Error(`invalid option: ${n}`)}}mean(n){const e=this.sum(n);switch(n){case"row":{for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e}case"column":{for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e}case void 0:return e/this.size;default:throw new Error(`invalid option: ${n}`)}}variance(n,e={}){if(typeof n=="object"&&(e=n,n=void 0),typeof e!="object")throw new TypeError("options must be an object");const{unbiased:t=!0,mean:r=this.mean(n)}=e;if(typeof t!="boolean")throw new TypeError("unbiased must be a boolean");switch(n){case"row":{if(!yt.isAnyArray(r))throw new TypeError("mean must be an array");return Lr(this,t,r)}case"column":{if(!yt.isAnyArray(r))throw new TypeError("mean must be an array");return Pr(this,t,r)}case void 0:{if(typeof r!="number")throw new TypeError("mean must be a number");return Ur(this,t,r)}default:throw new Error(`invalid option: ${n}`)}}standardDeviation(n,e){typeof n=="object"&&(e=n,n=void 0);const t=this.variance(n,e);if(n===void 0)return Math.sqrt(t);for(let r=0;r<t.length;r++)t[r]=Math.sqrt(t[r]);return t}center(n,e={}){if(typeof n=="object"&&(e=n,n=void 0),typeof e!="object")throw new TypeError("options must be an object");const{center:t=this.mean(n)}=e;switch(n){case"row":{if(!yt.isAnyArray(t))throw new TypeError("center must be an array");return $r(this,t),this}case"column":{if(!yt.isAnyArray(t))throw new TypeError("center must be an array");return qr(this,t),this}case void 0:{if(typeof t!="number")throw new TypeError("center must be a number");return Wr(this,t),this}default:throw new Error(`invalid option: ${n}`)}}scale(n,e={}){if(typeof n=="object"&&(e=n,n=void 0),typeof e!="object")throw new TypeError("options must be an object");let t=e.scale;switch(n){case"row":{if(t===void 0)t=Zr(this);else if(!yt.isAnyArray(t))throw new TypeError("scale must be an array");return Vr(this,t),this}case"column":{if(t===void 0)t=Gr(this);else if(!yt.isAnyArray(t))throw new TypeError("scale must be an array");return Yr(this,t),this}case void 0:{if(t===void 0)t=Kr(this);else if(typeof t!="number")throw new TypeError("scale must be a number");return Xr(this,t),this}default:throw new Error(`invalid option: ${n}`)}}toString(n){return Pe(this,n)}[Symbol.iterator](){return this.entries()}*entries(){for(let n=0;n<this.rows;n++)for(let e=0;e<this.columns;e++)yield[n,e,this.get(n,e)]}*values(){for(let n=0;n<this.rows;n++)for(let e=0;e<this.columns;e++)yield this.get(n,e)}}rt.prototype.klass="Matrix",typeof Symbol<"u"&&(rt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ir);function $e(i,n){return i-n}function Jr(i){return i.every(n=>typeof n=="number")}rt.random=rt.rand,rt.randomInt=rt.randInt,rt.diagonal=rt.diag,rt.prototype.diagonal=rt.prototype.diag,rt.identity=rt.eye,rt.prototype.negate=rt.prototype.neg,rt.prototype.tensorProduct=rt.prototype.kroneckerProduct;let X=(Zt=class extends rt{constructor(e,t){super();Oe(this,Jt);br(this,"data");if(Zt.isMatrix(e))De(this,Jt,Be).call(this,e.rows,e.columns),Zt.copy(e,this);else if(Number.isInteger(e)&&e>=0)De(this,Jt,Be).call(this,e,t);else if(yt.isAnyArray(e)){const r=e;if(e=r.length,t=e?r[0].length:0,typeof t!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let s=0;s<e;s++){if(r[s].length!==t)throw new RangeError("Inconsistent array dimensions");if(!Jr(r[s]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(r[s]))}this.rows=e,this.columns=t}else throw new TypeError("First argument must be a positive number or an array")}set(e,t,r){return this.data[e][t]=r,this}get(e,t){return this.data[e][t]}removeRow(e){return vt(this,e),this.data.splice(e,1),this.rows-=1,this}addRow(e,t){return t===void 0&&(t=e,e=this.rows),vt(this,e,!0),t=Float64Array.from(Lt(this,t)),this.data.splice(e,0,t),this.rows+=1,this}removeColumn(e){kt(this,e);for(let t=0;t<this.rows;t++){const r=new Float64Array(this.columns-1);for(let s=0;s<e;s++)r[s]=this.data[t][s];for(let s=e+1;s<this.columns;s++)r[s-1]=this.data[t][s];this.data[t]=r}return this.columns-=1,this}addColumn(e,t){typeof t>"u"&&(t=e,e=this.columns),kt(this,e,!0),t=Pt(this,t);for(let r=0;r<this.rows;r++){const s=new Float64Array(this.columns+1);let a=0;for(;a<e;a++)s[a]=this.data[r][a];for(s[a++]=t[r];a<this.columns+1;a++)s[a]=this.data[r][a-1];this.data[r]=s}return this.columns+=1,this}},Jt=new WeakSet,Be=function(e,t){if(this.data=[],Number.isInteger(t)&&t>=0)for(let r=0;r<e;r++)this.data.push(new Float64Array(t));else throw new TypeError("nColumns must be a positive integer");this.rows=e,this.columns=t},Zt);Tr(rt,X);const ye=class ye extends rt{constructor(e){super();Oe(this,wt,void 0);if(X.isMatrix(e)){if(!e.isSymmetric())throw new TypeError("not symmetric data");ve(this,wt,X.copy(e,new X(e.rows,e.rows)))}else if(Number.isInteger(e)&&e>=0)ve(this,wt,new X(e,e));else if(ve(this,wt,new X(e)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return zt(this,wt).size}get rows(){return zt(this,wt).rows}get columns(){return zt(this,wt).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(e){return X.isMatrix(e)&&e.klassType==="SymmetricMatrix"}static zeros(e){return new this(e)}static ones(e){return new this(e).fill(1)}clone(){const e=new ye(this.diagonalSize);for(const[t,r,s]of this.upperRightEntries())e.set(t,r,s);return e}toMatrix(){return new X(this)}get(e,t){return zt(this,wt).get(e,t)}set(e,t,r){return zt(this,wt).set(e,t,r),zt(this,wt).set(t,e,r),this}removeCross(e){return zt(this,wt).removeRow(e),zt(this,wt).removeColumn(e),this}addCross(e,t){t===void 0&&(t=e,e=this.diagonalSize);const r=t.slice();return r.splice(e,1),zt(this,wt).addRow(e,r),zt(this,wt).addColumn(e,t),this}applyMask(e){if(e.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const t=[];for(const[r,s]of e.entries())s||t.push(r);t.reverse();for(const r of t)this.removeCross(r);return this}toCompact(){const{diagonalSize:e}=this,t=new Array(e*(e+1)/2);for(let r=0,s=0,a=0;a<t.length;a++)t[a]=this.get(s,r),++r>=e&&(r=++s);return t}static fromCompact(e){const t=e.length,r=(Math.sqrt(8*t+1)-1)/2;if(!Number.isInteger(r))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(e)}`);const s=new ye(r);for(let a=0,o=0,l=0;l<t;l++)s.set(a,o,e[l]),++a>=r&&(a=++o);return s}*upperRightEntries(){for(let e=0,t=0;e<this.diagonalSize;void 0){const r=this.get(e,t);yield[e,t,r],++t>=this.diagonalSize&&(t=++e)}}*upperRightValues(){for(let e=0,t=0;e<this.diagonalSize;void 0)yield this.get(e,t),++t>=this.diagonalSize&&(t=++e)}};wt=new WeakMap;let Dt=ye;Dt.prototype.klassType="SymmetricMatrix";class ie extends Dt{static isDistanceMatrix(n){return Dt.isSymmetricMatrix(n)&&n.klassSubType==="DistanceMatrix"}constructor(n){if(super(n),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(n,e,t){return n===e&&(t=0),super.set(n,e,t)}addCross(n,e){return e===void 0&&(e=n,n=this.diagonalSize),e=e.slice(),e[n]=0,super.addCross(n,e)}toSymmetricMatrix(){return new Dt(this)}clone(){const n=new ie(this.diagonalSize);for(const[e,t,r]of this.upperRightEntries())e!==t&&n.set(e,t,r);return n}toCompact(){const{diagonalSize:n}=this,e=(n-1)*n/2,t=new Array(e);for(let r=1,s=0,a=0;a<t.length;a++)t[a]=this.get(s,r),++r>=n&&(r=++s+1);return t}static fromCompact(n){const e=n.length,t=(Math.sqrt(8*e+1)+1)/2;if(!Number.isInteger(t))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(n)}`);const r=new this(t);for(let s=1,a=0,o=0;o<e;o++)r.set(s,a,n[o]),++s>=t&&(s=++a+1);return r}}ie.prototype.klassSubType="DistanceMatrix";class jt extends rt{constructor(n,e,t){super(),this.matrix=n,this.rows=e,this.columns=t}}class Qr extends jt{constructor(n,e){kt(n,e),super(n,n.rows,1),this.column=e}set(n,e,t){return this.matrix.set(n,this.column,t),this}get(n){return this.matrix.get(n,this.column)}}class Hr extends jt{constructor(n,e){xe(n,e),super(n,n.rows,e.length),this.columnIndices=e}set(n,e,t){return this.matrix.set(n,this.columnIndices[e],t),this}get(n,e){return this.matrix.get(n,this.columnIndices[e])}}class tn extends jt{constructor(n){super(n,n.rows,n.columns)}set(n,e,t){return this.matrix.set(n,this.columns-e-1,t),this}get(n,e){return this.matrix.get(n,this.columns-e-1)}}class en extends jt{constructor(n){super(n,n.rows,n.columns)}set(n,e,t){return this.matrix.set(this.rows-n-1,e,t),this}get(n,e){return this.matrix.get(this.rows-n-1,e)}}class rn extends jt{constructor(n,e){vt(n,e),super(n,1,n.columns),this.row=e}set(n,e,t){return this.matrix.set(this.row,e,t),this}get(n,e){return this.matrix.get(this.row,e)}}class nn extends jt{constructor(n,e){ke(n,e),super(n,e.length,n.columns),this.rowIndices=e}set(n,e,t){return this.matrix.set(this.rowIndices[n],e,t),this}get(n,e){return this.matrix.get(this.rowIndices[n],e)}}class oe extends jt{constructor(n,e,t){ke(n,e),xe(n,t),super(n,e.length,t.length),this.rowIndices=e,this.columnIndices=t}set(n,e,t){return this.matrix.set(this.rowIndices[n],this.columnIndices[e],t),this}get(n,e){return this.matrix.get(this.rowIndices[n],this.columnIndices[e])}}class sn extends jt{constructor(n,e,t,r,s){Se(n,e,t,r,s),super(n,t-e+1,s-r+1),this.startRow=e,this.startColumn=r}set(n,e,t){return this.matrix.set(this.startRow+n,this.startColumn+e,t),this}get(n,e){return this.matrix.get(this.startRow+n,this.startColumn+e)}}class on extends jt{constructor(n){super(n,n.columns,n.rows)}set(n,e,t){return this.matrix.set(e,n,t),this}get(n,e){return this.matrix.get(e,n)}}class qe extends rt{constructor(n,e={}){const{rows:t=1}=e;if(n.length%t!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=t,this.columns=n.length/t,this.data=n}set(n,e,t){let r=this._calculateIndex(n,e);return this.data[r]=t,this}get(n,e){let t=this._calculateIndex(n,e);return this.data[t]}_calculateIndex(n,e){return n*this.columns+e}}class bt extends rt{constructor(n){super(),this.data=n,this.rows=n.length,this.columns=n[0].length}set(n,e,t){return this.data[n][e]=t,this}get(n,e){return this.data[n][e]}}function an(i,n){if(yt.isAnyArray(i))return i[0]&&yt.isAnyArray(i[0])?new bt(i):new qe(i,n);throw new Error("the argument is not an array")}class ae{constructor(n){n=bt.checkMatrix(n);let e=n.clone(),t=e.rows,r=e.columns,s=new Float64Array(t),a=1,o,l,u,p,f,b,m,y,d;for(o=0;o<t;o++)s[o]=o;for(y=new Float64Array(t),l=0;l<r;l++){for(o=0;o<t;o++)y[o]=e.get(o,l);for(o=0;o<t;o++){for(d=Math.min(o,l),f=0,u=0;u<d;u++)f+=e.get(o,u)*y[u];y[o]-=f,e.set(o,l,y[o])}for(p=l,o=l+1;o<t;o++)Math.abs(y[o])>Math.abs(y[p])&&(p=o);if(p!==l){for(u=0;u<r;u++)b=e.get(p,u),e.set(p,u,e.get(l,u)),e.set(l,u,b);m=s[p],s[p]=s[l],s[l]=m,a=-a}if(l<t&&e.get(l,l)!==0)for(o=l+1;o<t;o++)e.set(o,l,e.get(o,l)/e.get(l,l))}this.LU=e,this.pivotVector=s,this.pivotSign=a}isSingular(){let n=this.LU,e=n.columns;for(let t=0;t<e;t++)if(n.get(t,t)===0)return!0;return!1}solve(n){n=X.checkMatrix(n);let e=this.LU;if(e.rows!==n.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let r=n.columns,s=n.subMatrixRow(this.pivotVector,0,r-1),a=e.columns,o,l,u;for(u=0;u<a;u++)for(o=u+1;o<a;o++)for(l=0;l<r;l++)s.set(o,l,s.get(o,l)-s.get(u,l)*e.get(o,u));for(u=a-1;u>=0;u--){for(l=0;l<r;l++)s.set(u,l,s.get(u,l)/e.get(u,u));for(o=0;o<u;o++)for(l=0;l<r;l++)s.set(o,l,s.get(o,l)-s.get(u,l)*e.get(o,u))}return s}get determinant(){let n=this.LU;if(!n.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,t=n.columns;for(let r=0;r<t;r++)e*=n.get(r,r);return e}get lowerTriangularMatrix(){let n=this.LU,e=n.rows,t=n.columns,r=new X(e,t);for(let s=0;s<e;s++)for(let a=0;a<t;a++)s>a?r.set(s,a,n.get(s,a)):s===a?r.set(s,a,1):r.set(s,a,0);return r}get upperTriangularMatrix(){let n=this.LU,e=n.rows,t=n.columns,r=new X(e,t);for(let s=0;s<e;s++)for(let a=0;a<t;a++)s<=a?r.set(s,a,n.get(s,a)):r.set(s,a,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function Tt(i,n){let e=0;return Math.abs(i)>Math.abs(n)?(e=n/i,Math.abs(i)*Math.sqrt(1+e*e)):n!==0?(e=i/n,Math.abs(n)*Math.sqrt(1+e*e)):0}class Ee{constructor(n){n=bt.checkMatrix(n);let e=n.clone(),t=n.rows,r=n.columns,s=new Float64Array(r),a,o,l,u;for(l=0;l<r;l++){let p=0;for(a=l;a<t;a++)p=Tt(p,e.get(a,l));if(p!==0){for(e.get(l,l)<0&&(p=-p),a=l;a<t;a++)e.set(a,l,e.get(a,l)/p);for(e.set(l,l,e.get(l,l)+1),o=l+1;o<r;o++){for(u=0,a=l;a<t;a++)u+=e.get(a,l)*e.get(a,o);for(u=-u/e.get(l,l),a=l;a<t;a++)e.set(a,o,e.get(a,o)+u*e.get(a,l))}}s[l]=-p}this.QR=e,this.Rdiag=s}solve(n){n=X.checkMatrix(n);let e=this.QR,t=e.rows;if(n.rows!==t)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r=n.columns,s=n.clone(),a=e.columns,o,l,u,p;for(u=0;u<a;u++)for(l=0;l<r;l++){for(p=0,o=u;o<t;o++)p+=e.get(o,u)*s.get(o,l);for(p=-p/e.get(u,u),o=u;o<t;o++)s.set(o,l,s.get(o,l)+p*e.get(o,u))}for(u=a-1;u>=0;u--){for(l=0;l<r;l++)s.set(u,l,s.get(u,l)/this.Rdiag[u]);for(o=0;o<u;o++)for(l=0;l<r;l++)s.set(o,l,s.get(o,l)-s.get(u,l)*e.get(o,u))}return s.subMatrix(0,a-1,0,r-1)}isFullRank(){let n=this.QR.columns;for(let e=0;e<n;e++)if(this.Rdiag[e]===0)return!1;return!0}get upperTriangularMatrix(){let n=this.QR,e=n.columns,t=new X(e,e),r,s;for(r=0;r<e;r++)for(s=0;s<e;s++)r<s?t.set(r,s,n.get(r,s)):r===s?t.set(r,s,this.Rdiag[r]):t.set(r,s,0);return t}get orthogonalMatrix(){let n=this.QR,e=n.rows,t=n.columns,r=new X(e,t),s,a,o,l;for(o=t-1;o>=0;o--){for(s=0;s<e;s++)r.set(s,o,0);for(r.set(o,o,1),a=o;a<t;a++)if(n.get(o,o)!==0){for(l=0,s=o;s<e;s++)l+=n.get(s,o)*r.get(s,a);for(l=-l/n.get(o,o),s=o;s<e;s++)r.set(s,a,r.get(s,a)+l*n.get(s,o))}}return r}}class $t{constructor(n,e={}){if(n=bt.checkMatrix(n),n.isEmpty())throw new Error("Matrix must be non-empty");let t=n.rows,r=n.columns;const{computeLeftSingularVectors:s=!0,computeRightSingularVectors:a=!0,autoTranspose:o=!1}=e;let l=!!s,u=!!a,p=!1,f;if(t<r)if(!o)f=n.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{f=n.transpose(),t=f.rows,r=f.columns,p=!0;let k=l;l=u,u=k}else f=n.clone();let b=Math.min(t,r),m=Math.min(t+1,r),y=new Float64Array(m),d=new X(t,b),_=new X(r,r),h=new Float64Array(r),g=new Float64Array(t),v=new Float64Array(m);for(let k=0;k<m;k++)v[k]=k;let E=Math.min(t-1,r),M=Math.max(0,Math.min(r-2,t)),j=Math.max(E,M);for(let k=0;k<j;k++){if(k<E){y[k]=0;for(let O=k;O<t;O++)y[k]=Tt(y[k],f.get(O,k));if(y[k]!==0){f.get(k,k)<0&&(y[k]=-y[k]);for(let O=k;O<t;O++)f.set(O,k,f.get(O,k)/y[k]);f.set(k,k,f.get(k,k)+1)}y[k]=-y[k]}for(let O=k+1;O<r;O++){if(k<E&&y[k]!==0){let x=0;for(let C=k;C<t;C++)x+=f.get(C,k)*f.get(C,O);x=-x/f.get(k,k);for(let C=k;C<t;C++)f.set(C,O,f.get(C,O)+x*f.get(C,k))}h[O]=f.get(k,O)}if(l&&k<E)for(let O=k;O<t;O++)d.set(O,k,f.get(O,k));if(k<M){h[k]=0;for(let O=k+1;O<r;O++)h[k]=Tt(h[k],h[O]);if(h[k]!==0){h[k+1]<0&&(h[k]=0-h[k]);for(let O=k+1;O<r;O++)h[O]/=h[k];h[k+1]+=1}if(h[k]=-h[k],k+1<t&&h[k]!==0){for(let O=k+1;O<t;O++)g[O]=0;for(let O=k+1;O<t;O++)for(let x=k+1;x<r;x++)g[O]+=h[x]*f.get(O,x);for(let O=k+1;O<r;O++){let x=-h[O]/h[k+1];for(let C=k+1;C<t;C++)f.set(C,O,f.get(C,O)+x*g[C])}}if(u)for(let O=k+1;O<r;O++)_.set(O,k,h[O])}}let I=Math.min(r,t+1);if(E<r&&(y[E]=f.get(E,E)),t<I&&(y[I-1]=0),M+1<I&&(h[M]=f.get(M,I-1)),h[I-1]=0,l){for(let k=E;k<b;k++){for(let O=0;O<t;O++)d.set(O,k,0);d.set(k,k,1)}for(let k=E-1;k>=0;k--)if(y[k]!==0){for(let O=k+1;O<b;O++){let x=0;for(let C=k;C<t;C++)x+=d.get(C,k)*d.get(C,O);x=-x/d.get(k,k);for(let C=k;C<t;C++)d.set(C,O,d.get(C,O)+x*d.get(C,k))}for(let O=k;O<t;O++)d.set(O,k,-d.get(O,k));d.set(k,k,1+d.get(k,k));for(let O=0;O<k-1;O++)d.set(O,k,0)}else{for(let O=0;O<t;O++)d.set(O,k,0);d.set(k,k,1)}}if(u)for(let k=r-1;k>=0;k--){if(k<M&&h[k]!==0)for(let O=k+1;O<r;O++){let x=0;for(let C=k+1;C<r;C++)x+=_.get(C,k)*_.get(C,O);x=-x/_.get(k+1,k);for(let C=k+1;C<r;C++)_.set(C,O,_.get(C,O)+x*_.get(C,k))}for(let O=0;O<r;O++)_.set(O,k,0);_.set(k,k,1)}let T=I-1,N=Number.EPSILON;for(;I>0;){let k,O;for(k=I-2;k>=-1&&k!==-1;k--){const x=Number.MIN_VALUE+N*Math.abs(y[k]+Math.abs(y[k+1]));if(Math.abs(h[k])<=x||Number.isNaN(h[k])){h[k]=0;break}}if(k===I-2)O=4;else{let x;for(x=I-1;x>=k&&x!==k;x--){let C=(x!==I?Math.abs(h[x]):0)+(x!==k+1?Math.abs(h[x-1]):0);if(Math.abs(y[x])<=N*C){y[x]=0;break}}x===k?O=3:x===I-1?O=1:(O=2,k=x)}switch(k++,O){case 1:{let x=h[I-2];h[I-2]=0;for(let C=I-2;C>=k;C--){let w=Tt(y[C],x),F=y[C]/w,J=x/w;if(y[C]=w,C!==k&&(x=-J*h[C-1],h[C-1]=F*h[C-1]),u)for(let P=0;P<r;P++)w=F*_.get(P,C)+J*_.get(P,I-1),_.set(P,I-1,-J*_.get(P,C)+F*_.get(P,I-1)),_.set(P,C,w)}break}case 2:{let x=h[k-1];h[k-1]=0;for(let C=k;C<I;C++){let w=Tt(y[C],x),F=y[C]/w,J=x/w;if(y[C]=w,x=-J*h[C],h[C]=F*h[C],l)for(let P=0;P<t;P++)w=F*d.get(P,C)+J*d.get(P,k-1),d.set(P,k-1,-J*d.get(P,C)+F*d.get(P,k-1)),d.set(P,C,w)}break}case 3:{const x=Math.max(Math.abs(y[I-1]),Math.abs(y[I-2]),Math.abs(h[I-2]),Math.abs(y[k]),Math.abs(h[k])),C=y[I-1]/x,w=y[I-2]/x,F=h[I-2]/x,J=y[k]/x,P=h[k]/x,tt=((w+C)*(w-C)+F*F)/2,q=C*F*(C*F);let Q=0;(tt!==0||q!==0)&&(tt<0?Q=0-Math.sqrt(tt*tt+q):Q=Math.sqrt(tt*tt+q),Q=q/(tt+Q));let A=(J+C)*(J-C)+Q,D=J*P;for(let V=k;V<I-1;V++){let Y=Tt(A,D);Y===0&&(Y=Number.MIN_VALUE);let Z=A/Y,ot=D/Y;if(V!==k&&(h[V-1]=Y),A=Z*y[V]+ot*h[V],h[V]=Z*h[V]-ot*y[V],D=ot*y[V+1],y[V+1]=Z*y[V+1],u)for(let st=0;st<r;st++)Y=Z*_.get(st,V)+ot*_.get(st,V+1),_.set(st,V+1,-ot*_.get(st,V)+Z*_.get(st,V+1)),_.set(st,V,Y);if(Y=Tt(A,D),Y===0&&(Y=Number.MIN_VALUE),Z=A/Y,ot=D/Y,y[V]=Y,A=Z*h[V]+ot*y[V+1],y[V+1]=-ot*h[V]+Z*y[V+1],D=ot*h[V+1],h[V+1]=Z*h[V+1],l&&V<t-1)for(let st=0;st<t;st++)Y=Z*d.get(st,V)+ot*d.get(st,V+1),d.set(st,V+1,-ot*d.get(st,V)+Z*d.get(st,V+1)),d.set(st,V,Y)}h[I-2]=A;break}case 4:{if(y[k]<=0&&(y[k]=y[k]<0?-y[k]:0,u))for(let x=0;x<=T;x++)_.set(x,k,-_.get(x,k));for(;k<T&&!(y[k]>=y[k+1]);){let x=y[k];if(y[k]=y[k+1],y[k+1]=x,u&&k<r-1)for(let C=0;C<r;C++)x=_.get(C,k+1),_.set(C,k+1,_.get(C,k)),_.set(C,k,x);if(l&&k<t-1)for(let C=0;C<t;C++)x=d.get(C,k+1),d.set(C,k+1,d.get(C,k)),d.set(C,k,x);k++}I--;break}}}if(p){let k=_;_=d,d=k}this.m=t,this.n=r,this.s=y,this.U=d,this.V=_}solve(n){let e=n,t=this.threshold,r=this.s.length,s=X.zeros(r,r);for(let b=0;b<r;b++)Math.abs(this.s[b])<=t?s.set(b,b,0):s.set(b,b,1/this.s[b]);let a=this.U,o=this.rightSingularVectors,l=o.mmul(s),u=o.rows,p=a.rows,f=X.zeros(u,p);for(let b=0;b<u;b++)for(let m=0;m<p;m++){let y=0;for(let d=0;d<r;d++)y+=l.get(b,d)*a.get(m,d);f.set(b,m,y)}return f.mmul(e)}solveForDiagonal(n){return this.solve(X.diag(n))}inverse(){let n=this.V,e=this.threshold,t=n.rows,r=n.columns,s=new X(t,this.s.length);for(let p=0;p<t;p++)for(let f=0;f<r;f++)Math.abs(this.s[f])>e&&s.set(p,f,n.get(p,f)/this.s[f]);let a=this.U,o=a.rows,l=a.columns,u=new X(t,o);for(let p=0;p<t;p++)for(let f=0;f<o;f++){let b=0;for(let m=0;m<l;m++)b+=s.get(p,m)*a.get(f,m);u.set(p,f,b)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let n=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,t=this.s;for(let r=0,s=t.length;r<s;r++)t[r]>n&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return X.diag(this.s)}}function ln(i,n=!1){return i=bt.checkMatrix(i),n?new $t(i).inverse():We(i,X.eye(i.rows))}function We(i,n,e=!1){return i=bt.checkMatrix(i),n=bt.checkMatrix(n),e?new $t(i).solve(n):i.isSquare()?new ae(i).solve(n):new Ee(i).solve(n)}function le(i){if(i=X.checkMatrix(i),i.isSquare()){if(i.columns===0)return 1;let n,e,t,r;if(i.columns===2)return n=i.get(0,0),e=i.get(0,1),t=i.get(1,0),r=i.get(1,1),n*r-e*t;if(i.columns===3){let s,a,o;return s=new oe(i,[1,2],[1,2]),a=new oe(i,[1,2],[0,2]),o=new oe(i,[1,2],[0,1]),n=i.get(0,0),e=i.get(0,1),t=i.get(0,2),n*le(s)-e*le(a)+t*le(o)}else return new ae(i).determinant}else throw Error("determinant can only be calculated for a square matrix")}function hn(i,n){let e=[];for(let t=0;t<i;t++)t!==n&&e.push(t);return e}function un(i,n,e,t=1e-9,r=1e-9){if(i>r)return new Array(n.rows+1).fill(0);{let s=n.addRow(e,[0]);for(let a=0;a<s.rows;a++)Math.abs(s.get(a,0))<t&&s.set(a,0,0);return s.to1DArray()}}function fn(i,n={}){const{thresholdValue:e=1e-9,thresholdError:t=1e-9}=n;i=X.checkMatrix(i);let r=i.rows,s=new X(r,r);for(let a=0;a<r;a++){let o=X.columnVector(i.getRow(a)),l=i.subMatrixRow(hn(r,a)).transpose(),p=new $t(l).solve(o),f=X.sub(o,l.mmul(p)).abs().max();s.setRow(a,un(f,p,a,e,t))}return s}function cn(i,n=Number.EPSILON){if(i=X.checkMatrix(i),i.isEmpty())return i.transpose();let e=new $t(i,{autoTranspose:!0}),t=e.leftSingularVectors,r=e.rightSingularVectors,s=e.diagonal;for(let a=0;a<s.length;a++)Math.abs(s[a])>n?s[a]=1/s[a]:s[a]=0;return r.mmul(X.diag(s).mmul(t.transpose()))}function dn(i,n=i,e={}){i=new X(i);let t=!1;if(typeof n=="object"&&!X.isMatrix(n)&&!yt.isAnyArray(n)?(e=n,n=i,t=!0):n=new X(n),i.rows!==n.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:r=!0}=e;r&&(i=i.center("column"),t||(n=n.center("column")));const s=i.transpose().mmul(n);for(let a=0;a<s.rows;a++)for(let o=0;o<s.columns;o++)s.set(a,o,s.get(a,o)*(1/(i.rows-1)));return s}function pn(i,n=i,e={}){i=new X(i);let t=!1;if(typeof n=="object"&&!X.isMatrix(n)&&!yt.isAnyArray(n)?(e=n,n=i,t=!0):n=new X(n),i.rows!==n.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:r=!0,scale:s=!0}=e;r&&(i.center("column"),t||n.center("column")),s&&(i.scale("column"),t||n.scale("column"));const a=i.standardDeviation("column",{unbiased:!0}),o=t?a:n.standardDeviation("column",{unbiased:!0}),l=i.transpose().mmul(n);for(let u=0;u<l.rows;u++)for(let p=0;p<l.columns;p++)l.set(u,p,l.get(u,p)*(1/(a[u]*o[p]))*(1/(i.rows-1)));return l}class Ze{constructor(n,e={}){const{assumeSymmetric:t=!1}=e;if(n=bt.checkMatrix(n),!n.isSquare())throw new Error("Matrix is not a square matrix");if(n.isEmpty())throw new Error("Matrix must be non-empty");let r=n.columns,s=new X(r,r),a=new Float64Array(r),o=new Float64Array(r),l=n,u,p,f=!1;if(t?f=!0:f=n.isSymmetric(),f){for(u=0;u<r;u++)for(p=0;p<r;p++)s.set(u,p,l.get(u,p));mn(r,o,a,s),gn(r,o,a,s)}else{let b=new X(r,r),m=new Float64Array(r);for(p=0;p<r;p++)for(u=0;u<r;u++)b.set(u,p,l.get(u,p));wn(r,b,m,s),yn(r,o,a,s,b)}this.n=r,this.e=o,this.d=a,this.V=s}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let n=this.n,e=this.e,t=this.d,r=new X(n,n),s,a;for(s=0;s<n;s++){for(a=0;a<n;a++)r.set(s,a,0);r.set(s,s,t[s]),e[s]>0?r.set(s,s+1,e[s]):e[s]<0&&r.set(s,s-1,e[s])}return r}}function mn(i,n,e,t){let r,s,a,o,l,u,p,f;for(l=0;l<i;l++)e[l]=t.get(i-1,l);for(o=i-1;o>0;o--){for(f=0,a=0,u=0;u<o;u++)f=f+Math.abs(e[u]);if(f===0)for(n[o]=e[o-1],l=0;l<o;l++)e[l]=t.get(o-1,l),t.set(o,l,0),t.set(l,o,0);else{for(u=0;u<o;u++)e[u]/=f,a+=e[u]*e[u];for(r=e[o-1],s=Math.sqrt(a),r>0&&(s=-s),n[o]=f*s,a=a-r*s,e[o-1]=r-s,l=0;l<o;l++)n[l]=0;for(l=0;l<o;l++){for(r=e[l],t.set(l,o,r),s=n[l]+t.get(l,l)*r,u=l+1;u<=o-1;u++)s+=t.get(u,l)*e[u],n[u]+=t.get(u,l)*r;n[l]=s}for(r=0,l=0;l<o;l++)n[l]/=a,r+=n[l]*e[l];for(p=r/(a+a),l=0;l<o;l++)n[l]-=p*e[l];for(l=0;l<o;l++){for(r=e[l],s=n[l],u=l;u<=o-1;u++)t.set(u,l,t.get(u,l)-(r*n[u]+s*e[u]));e[l]=t.get(o-1,l),t.set(o,l,0)}}e[o]=a}for(o=0;o<i-1;o++){if(t.set(i-1,o,t.get(o,o)),t.set(o,o,1),a=e[o+1],a!==0){for(u=0;u<=o;u++)e[u]=t.get(u,o+1)/a;for(l=0;l<=o;l++){for(s=0,u=0;u<=o;u++)s+=t.get(u,o+1)*t.get(u,l);for(u=0;u<=o;u++)t.set(u,l,t.get(u,l)-s*e[u])}}for(u=0;u<=o;u++)t.set(u,o+1,0)}for(l=0;l<i;l++)e[l]=t.get(i-1,l),t.set(i-1,l,0);t.set(i-1,i-1,1),n[0]=0}function gn(i,n,e,t){let r,s,a,o,l,u,p,f,b,m,y,d,_,h,g,v;for(a=1;a<i;a++)n[a-1]=n[a];n[i-1]=0;let E=0,M=0,j=Number.EPSILON;for(u=0;u<i;u++){for(M=Math.max(M,Math.abs(e[u])+Math.abs(n[u])),p=u;p<i&&!(Math.abs(n[p])<=j*M);)p++;if(p>u)do{for(r=e[u],f=(e[u+1]-r)/(2*n[u]),b=Tt(f,1),f<0&&(b=-b),e[u]=n[u]/(f+b),e[u+1]=n[u]*(f+b),m=e[u+1],s=r-e[u],a=u+2;a<i;a++)e[a]-=s;for(E=E+s,f=e[p],y=1,d=y,_=y,h=n[u+1],g=0,v=0,a=p-1;a>=u;a--)for(_=d,d=y,v=g,r=y*n[a],s=y*f,b=Tt(f,n[a]),n[a+1]=g*b,g=n[a]/b,y=f/b,f=y*e[a]-g*r,e[a+1]=s+g*(y*r+g*e[a]),l=0;l<i;l++)s=t.get(l,a+1),t.set(l,a+1,g*t.get(l,a)+y*s),t.set(l,a,y*t.get(l,a)-g*s);f=-g*v*_*h*n[u]/m,n[u]=g*f,e[u]=y*f}while(Math.abs(n[u])>j*M);e[u]=e[u]+E,n[u]=0}for(a=0;a<i-1;a++){for(l=a,f=e[a],o=a+1;o<i;o++)e[o]<f&&(l=o,f=e[o]);if(l!==a)for(e[l]=e[a],e[a]=f,o=0;o<i;o++)f=t.get(o,a),t.set(o,a,t.get(o,l)),t.set(o,l,f)}}function wn(i,n,e,t){let r=0,s=i-1,a,o,l,u,p,f,b;for(f=r+1;f<=s-1;f++){for(b=0,u=f;u<=s;u++)b=b+Math.abs(n.get(u,f-1));if(b!==0){for(l=0,u=s;u>=f;u--)e[u]=n.get(u,f-1)/b,l+=e[u]*e[u];for(o=Math.sqrt(l),e[f]>0&&(o=-o),l=l-e[f]*o,e[f]=e[f]-o,p=f;p<i;p++){for(a=0,u=s;u>=f;u--)a+=e[u]*n.get(u,p);for(a=a/l,u=f;u<=s;u++)n.set(u,p,n.get(u,p)-a*e[u])}for(u=0;u<=s;u++){for(a=0,p=s;p>=f;p--)a+=e[p]*n.get(u,p);for(a=a/l,p=f;p<=s;p++)n.set(u,p,n.get(u,p)-a*e[p])}e[f]=b*e[f],n.set(f,f-1,b*o)}}for(u=0;u<i;u++)for(p=0;p<i;p++)t.set(u,p,u===p?1:0);for(f=s-1;f>=r+1;f--)if(n.get(f,f-1)!==0){for(u=f+1;u<=s;u++)e[u]=n.get(u,f-1);for(p=f;p<=s;p++){for(o=0,u=f;u<=s;u++)o+=e[u]*t.get(u,p);for(o=o/e[f]/n.get(f,f-1),u=f;u<=s;u++)t.set(u,p,t.get(u,p)+o*e[u])}}}function yn(i,n,e,t,r){let s=i-1,a=0,o=i-1,l=Number.EPSILON,u=0,p=0,f=0,b=0,m=0,y=0,d=0,_=0,h,g,v,E,M,j,I,T,N,k,O,x,C,w,F;for(h=0;h<i;h++)for((h<a||h>o)&&(e[h]=r.get(h,h),n[h]=0),g=Math.max(h-1,0);g<i;g++)p=p+Math.abs(r.get(h,g));for(;s>=a;){for(E=s;E>a&&(y=Math.abs(r.get(E-1,E-1))+Math.abs(r.get(E,E)),y===0&&(y=p),!(Math.abs(r.get(E,E-1))<l*y));)E--;if(E===s)r.set(s,s,r.get(s,s)+u),e[s]=r.get(s,s),n[s]=0,s--,_=0;else if(E===s-1){if(I=r.get(s,s-1)*r.get(s-1,s),f=(r.get(s-1,s-1)-r.get(s,s))/2,b=f*f+I,d=Math.sqrt(Math.abs(b)),r.set(s,s,r.get(s,s)+u),r.set(s-1,s-1,r.get(s-1,s-1)+u),T=r.get(s,s),b>=0){for(d=f>=0?f+d:f-d,e[s-1]=T+d,e[s]=e[s-1],d!==0&&(e[s]=T-I/d),n[s-1]=0,n[s]=0,T=r.get(s,s-1),y=Math.abs(T)+Math.abs(d),f=T/y,b=d/y,m=Math.sqrt(f*f+b*b),f=f/m,b=b/m,g=s-1;g<i;g++)d=r.get(s-1,g),r.set(s-1,g,b*d+f*r.get(s,g)),r.set(s,g,b*r.get(s,g)-f*d);for(h=0;h<=s;h++)d=r.get(h,s-1),r.set(h,s-1,b*d+f*r.get(h,s)),r.set(h,s,b*r.get(h,s)-f*d);for(h=a;h<=o;h++)d=t.get(h,s-1),t.set(h,s-1,b*d+f*t.get(h,s)),t.set(h,s,b*t.get(h,s)-f*d)}else e[s-1]=T+f,e[s]=T+f,n[s-1]=d,n[s]=-d;s=s-2,_=0}else{if(T=r.get(s,s),N=0,I=0,E<s&&(N=r.get(s-1,s-1),I=r.get(s,s-1)*r.get(s-1,s)),_===10){for(u+=T,h=a;h<=s;h++)r.set(h,h,r.get(h,h)-T);y=Math.abs(r.get(s,s-1))+Math.abs(r.get(s-1,s-2)),T=N=.75*y,I=-.4375*y*y}if(_===30&&(y=(N-T)/2,y=y*y+I,y>0)){for(y=Math.sqrt(y),N<T&&(y=-y),y=T-I/((N-T)/2+y),h=a;h<=s;h++)r.set(h,h,r.get(h,h)-y);u+=y,T=N=I=.964}for(_=_+1,M=s-2;M>=E&&(d=r.get(M,M),m=T-d,y=N-d,f=(m*y-I)/r.get(M+1,M)+r.get(M,M+1),b=r.get(M+1,M+1)-d-m-y,m=r.get(M+2,M+1),y=Math.abs(f)+Math.abs(b)+Math.abs(m),f=f/y,b=b/y,m=m/y,!(M===E||Math.abs(r.get(M,M-1))*(Math.abs(b)+Math.abs(m))<l*(Math.abs(f)*(Math.abs(r.get(M-1,M-1))+Math.abs(d)+Math.abs(r.get(M+1,M+1))))));)M--;for(h=M+2;h<=s;h++)r.set(h,h-2,0),h>M+2&&r.set(h,h-3,0);for(v=M;v<=s-1&&(w=v!==s-1,v!==M&&(f=r.get(v,v-1),b=r.get(v+1,v-1),m=w?r.get(v+2,v-1):0,T=Math.abs(f)+Math.abs(b)+Math.abs(m),T!==0&&(f=f/T,b=b/T,m=m/T)),T!==0);v++)if(y=Math.sqrt(f*f+b*b+m*m),f<0&&(y=-y),y!==0){for(v!==M?r.set(v,v-1,-y*T):E!==M&&r.set(v,v-1,-r.get(v,v-1)),f=f+y,T=f/y,N=b/y,d=m/y,b=b/f,m=m/f,g=v;g<i;g++)f=r.get(v,g)+b*r.get(v+1,g),w&&(f=f+m*r.get(v+2,g),r.set(v+2,g,r.get(v+2,g)-f*d)),r.set(v,g,r.get(v,g)-f*T),r.set(v+1,g,r.get(v+1,g)-f*N);for(h=0;h<=Math.min(s,v+3);h++)f=T*r.get(h,v)+N*r.get(h,v+1),w&&(f=f+d*r.get(h,v+2),r.set(h,v+2,r.get(h,v+2)-f*m)),r.set(h,v,r.get(h,v)-f),r.set(h,v+1,r.get(h,v+1)-f*b);for(h=a;h<=o;h++)f=T*t.get(h,v)+N*t.get(h,v+1),w&&(f=f+d*t.get(h,v+2),t.set(h,v+2,t.get(h,v+2)-f*m)),t.set(h,v,t.get(h,v)-f),t.set(h,v+1,t.get(h,v+1)-f*b)}}}if(p!==0){for(s=i-1;s>=0;s--)if(f=e[s],b=n[s],b===0)for(E=s,r.set(s,s,1),h=s-1;h>=0;h--){for(I=r.get(h,h)-f,m=0,g=E;g<=s;g++)m=m+r.get(h,g)*r.get(g,s);if(n[h]<0)d=I,y=m;else if(E=h,n[h]===0?r.set(h,s,I!==0?-m/I:-m/(l*p)):(T=r.get(h,h+1),N=r.get(h+1,h),b=(e[h]-f)*(e[h]-f)+n[h]*n[h],j=(T*y-d*m)/b,r.set(h,s,j),r.set(h+1,s,Math.abs(T)>Math.abs(d)?(-m-I*j)/T:(-y-N*j)/d)),j=Math.abs(r.get(h,s)),l*j*j>1)for(g=h;g<=s;g++)r.set(g,s,r.get(g,s)/j)}else if(b<0)for(E=s-1,Math.abs(r.get(s,s-1))>Math.abs(r.get(s-1,s))?(r.set(s-1,s-1,b/r.get(s,s-1)),r.set(s-1,s,-(r.get(s,s)-f)/r.get(s,s-1))):(F=he(0,-r.get(s-1,s),r.get(s-1,s-1)-f,b),r.set(s-1,s-1,F[0]),r.set(s-1,s,F[1])),r.set(s,s-1,0),r.set(s,s,1),h=s-2;h>=0;h--){for(k=0,O=0,g=E;g<=s;g++)k=k+r.get(h,g)*r.get(g,s-1),O=O+r.get(h,g)*r.get(g,s);if(I=r.get(h,h)-f,n[h]<0)d=I,m=k,y=O;else if(E=h,n[h]===0?(F=he(-k,-O,I,b),r.set(h,s-1,F[0]),r.set(h,s,F[1])):(T=r.get(h,h+1),N=r.get(h+1,h),x=(e[h]-f)*(e[h]-f)+n[h]*n[h]-b*b,C=(e[h]-f)*2*b,x===0&&C===0&&(x=l*p*(Math.abs(I)+Math.abs(b)+Math.abs(T)+Math.abs(N)+Math.abs(d))),F=he(T*m-d*k+b*O,T*y-d*O-b*k,x,C),r.set(h,s-1,F[0]),r.set(h,s,F[1]),Math.abs(T)>Math.abs(d)+Math.abs(b)?(r.set(h+1,s-1,(-k-I*r.get(h,s-1)+b*r.get(h,s))/T),r.set(h+1,s,(-O-I*r.get(h,s)-b*r.get(h,s-1))/T)):(F=he(-m-N*r.get(h,s-1),-y-N*r.get(h,s),d,b),r.set(h+1,s-1,F[0]),r.set(h+1,s,F[1]))),j=Math.max(Math.abs(r.get(h,s-1)),Math.abs(r.get(h,s))),l*j*j>1)for(g=h;g<=s;g++)r.set(g,s-1,r.get(g,s-1)/j),r.set(g,s,r.get(g,s)/j)}for(h=0;h<i;h++)if(h<a||h>o)for(g=h;g<i;g++)t.set(h,g,r.get(h,g));for(g=i-1;g>=a;g--)for(h=a;h<=o;h++){for(d=0,v=a;v<=Math.min(g,o);v++)d=d+t.get(h,v)*r.get(v,g);t.set(h,g,d)}}}function he(i,n,e,t){let r,s;return Math.abs(e)>Math.abs(t)?(r=t/e,s=e+r*t,[(i+r*n)/s,(n-r*i)/s]):(r=e/t,s=t+r*e,[(r*i+n)/s,(r*n-i)/s])}class Ve{constructor(n){if(n=bt.checkMatrix(n),!n.isSymmetric())throw new Error("Matrix is not symmetric");let e=n,t=e.rows,r=new X(t,t),s=!0,a,o,l;for(o=0;o<t;o++){let u=0;for(l=0;l<o;l++){let p=0;for(a=0;a<l;a++)p+=r.get(l,a)*r.get(o,a);p=(e.get(o,l)-p)/r.get(l,l),r.set(o,l,p),u=u+p*p}for(u=e.get(o,o)-u,s&=u>0,r.set(o,o,Math.sqrt(Math.max(u,0))),l=o+1;l<t;l++)r.set(o,l,0)}this.L=r,this.positiveDefinite=!!s}isPositiveDefinite(){return this.positiveDefinite}solve(n){n=bt.checkMatrix(n);let e=this.L,t=e.rows;if(n.rows!==t)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let r=n.columns,s=n.clone(),a,o,l;for(l=0;l<t;l++)for(o=0;o<r;o++){for(a=0;a<l;a++)s.set(l,o,s.get(l,o)-s.get(a,o)*e.get(l,a));s.set(l,o,s.get(l,o)/e.get(l,l))}for(l=t-1;l>=0;l--)for(o=0;o<r;o++){for(a=l+1;a<t;a++)s.set(l,o,s.get(l,o)-s.get(a,o)*e.get(a,l));s.set(l,o,s.get(l,o)/e.get(l,l))}return s}get lowerTriangularMatrix(){return this.L}}class Ge{constructor(n,e={}){n=bt.checkMatrix(n);let{Y:t}=e;const{scaleScores:r=!1,maxIterations:s=1e3,terminationCriteria:a=1e-10}=e;let o;if(t){if(yt.isAnyArray(t)&&typeof t[0]=="number"?t=X.columnVector(t):t=bt.checkMatrix(t),t.rows!==n.rows)throw new Error("Y should have the same number of rows as X");o=t.getColumnVector(0)}else o=n.getColumnVector(0);let l=1,u,p,f,b;for(let m=0;m<s&&l>a;m++)f=n.transpose().mmul(o).div(o.transpose().mmul(o).get(0,0)),f=f.div(f.norm()),u=n.mmul(f).div(f.transpose().mmul(f).get(0,0)),m>0&&(l=u.clone().sub(b).pow(2).sum()),b=u.clone(),t?(p=t.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),p=p.div(p.norm()),o=t.mmul(p).div(p.transpose().mmul(p).get(0,0))):o=u;if(t){let m=n.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));m=m.div(m.norm());let y=n.clone().sub(u.clone().mmul(m.transpose())),d=o.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),_=t.clone().sub(u.clone().mulS(d.get(0,0)).mmul(p.transpose()));this.t=u,this.p=m.transpose(),this.w=f.transpose(),this.q=p,this.u=o,this.s=u.transpose().mmul(u),this.xResidual=y,this.yResidual=_,this.betas=d}else this.w=f.transpose(),this.s=u.transpose().mmul(u).sqrt(),r?this.t=u.clone().div(this.s.get(0,0)):this.t=u,this.xResidual=n.sub(u.mmul(f.transpose()))}}nt.AbstractMatrix=rt,nt.CHO=Ve,nt.CholeskyDecomposition=Ve,nt.DistanceMatrix=ie,nt.EVD=Ze,nt.EigenvalueDecomposition=Ze,nt.LU=ae,nt.LuDecomposition=ae;var Ye=nt.Matrix=X;nt.MatrixColumnSelectionView=Hr,nt.MatrixColumnView=Qr,nt.MatrixFlipColumnView=tn,nt.MatrixFlipRowView=en,nt.MatrixRowSelectionView=nn,nt.MatrixRowView=rn,nt.MatrixSelectionView=oe,nt.MatrixSubView=sn,nt.MatrixTransposeView=on,nt.NIPALS=Ge,nt.Nipals=Ge,nt.QR=Ee,nt.QrDecomposition=Ee,nt.SVD=$t,nt.SingularValueDecomposition=$t,nt.SymmetricMatrix=Dt,nt.WrapperMatrix1D=qe,nt.WrapperMatrix2D=bt,nt.correlation=pn,nt.covariance=dn;var Ke=nt.default=X;nt.determinant=le,nt.inverse=ln,nt.linearDependencies=fn,nt.pseudoInverse=cn,nt.solve=We,nt.wrap=an;const Xe=Ye;Ke.Matrix&&Ke.Matrix;var Je={exports:{}};(function(i,n){(function(){var e,t,r,s,a,o,l,u,p,f,b,m,y,d,_;r=Math.floor,f=Math.min,t=function(h,g){return h<g?-1:h>g?1:0},p=function(h,g,v,E,M){var j;if(v==null&&(v=0),M==null&&(M=t),v<0)throw new Error("lo must be non-negative");for(E==null&&(E=h.length);v<E;)j=r((v+E)/2),M(g,h[j])<0?E=j:v=j+1;return[].splice.apply(h,[v,v-v].concat(g)),g},o=function(h,g,v){return v==null&&(v=t),h.push(g),d(h,0,h.length-1,v)},a=function(h,g){var v,E;return g==null&&(g=t),v=h.pop(),h.length?(E=h[0],h[0]=v,_(h,0,g)):E=v,E},u=function(h,g,v){var E;return v==null&&(v=t),E=h[0],h[0]=g,_(h,0,v),E},l=function(h,g,v){var E;return v==null&&(v=t),h.length&&v(h[0],g)<0&&(E=[h[0],g],g=E[0],h[0]=E[1],_(h,0,v)),g},s=function(h,g){var v,E,M,j,I,T;for(g==null&&(g=t),j=(function(){T=[];for(var N=0,k=r(h.length/2);0<=k?N<k:N>k;0<=k?N++:N--)T.push(N);return T}).apply(this).reverse(),I=[],E=0,M=j.length;E<M;E++)v=j[E],I.push(_(h,v,g));return I},y=function(h,g,v){var E;if(v==null&&(v=t),E=h.indexOf(g),E!==-1)return d(h,0,E,v),_(h,E,v)},b=function(h,g,v){var E,M,j,I,T;if(v==null&&(v=t),M=h.slice(0,g),!M.length)return M;for(s(M,v),T=h.slice(g),j=0,I=T.length;j<I;j++)E=T[j],l(M,E,v);return M.sort(v).reverse()},m=function(h,g,v){var E,M,j,I,T,N,k,O,x;if(v==null&&(v=t),g*10<=h.length){if(j=h.slice(0,g).sort(v),!j.length)return j;for(M=j[j.length-1],k=h.slice(g),I=0,N=k.length;I<N;I++)E=k[I],v(E,M)<0&&(p(j,E,0,null,v),j.pop(),M=j[j.length-1]);return j}for(s(h,v),x=[],T=0,O=f(g,h.length);0<=O?T<O:T>O;0<=O?++T:--T)x.push(a(h,v));return x},d=function(h,g,v,E){var M,j,I;for(E==null&&(E=t),M=h[v];v>g;){if(I=v-1>>1,j=h[I],E(M,j)<0){h[v]=j,v=I;continue}break}return h[v]=M},_=function(h,g,v){var E,M,j,I,T;for(v==null&&(v=t),M=h.length,T=g,j=h[g],E=2*g+1;E<M;)I=E+1,I<M&&!(v(h[E],h[I])<0)&&(E=I),h[g]=h[E],g=E,E=2*g+1;return h[g]=j,d(h,T,g,v)},e=function(){h.push=o,h.pop=a,h.replace=u,h.pushpop=l,h.heapify=s,h.updateItem=y,h.nlargest=b,h.nsmallest=m;function h(g){this.cmp=g??t,this.nodes=[]}return h.prototype.push=function(g){return o(this.nodes,g,this.cmp)},h.prototype.pop=function(){return a(this.nodes,this.cmp)},h.prototype.peek=function(){return this.nodes[0]},h.prototype.contains=function(g){return this.nodes.indexOf(g)!==-1},h.prototype.replace=function(g){return u(this.nodes,g,this.cmp)},h.prototype.pushpop=function(g){return l(this.nodes,g,this.cmp)},h.prototype.heapify=function(){return s(this.nodes,this.cmp)},h.prototype.updateItem=function(g){return y(this.nodes,g,this.cmp)},h.prototype.clear=function(){return this.nodes=[]},h.prototype.empty=function(){return this.nodes.length===0},h.prototype.size=function(){return this.nodes.length},h.prototype.clone=function(){var g;return g=new h,g.nodes=this.nodes.slice(0),g},h.prototype.toArray=function(){return this.nodes.slice(0)},h.prototype.insert=h.prototype.push,h.prototype.top=h.prototype.peek,h.prototype.front=h.prototype.peek,h.prototype.has=h.prototype.contains,h.prototype.copy=h.prototype.clone,h}(),function(h,g){return i.exports=g()}(this,function(){return e})}).call(Mt)})(Je);var bn=Je.exports,_n=bn,vn=_r(_n);class ue{constructor(){this.children=[],this.height=0,this.size=1,this.index=-1,this.isLeaf=!1}cut(n){if(typeof n!="number")throw new TypeError("threshold must be a number");if(n<0)throw new RangeError("threshold must be a positive number");let e=[this];const t=[];for(;e.length>0;){const r=e.shift();n>=r.height?t.push(r):e=e.concat(r.children)}return t}group(n){if(!Number.isInteger(n)||n<1)throw new RangeError("groups must be a positive integer");const e=new vn((r,s)=>s.height-r.height);for(e.push(this);e.size()<n;){const r=e.pop();if(r.children.length===0)break;r.children.forEach(s=>e.push(s))}const t=new ue;return t.children=e.toArray(),t.height=this.height,t}traverse(n){function e(t,r){if(r(t),t.children)for(const s of t.children)e(s,r)}e(this,n)}indices(){const n=[];return this.traverse(e=>{e.isLeaf&&n.push(e.index)}),n}}function kn(i,n){return Math.min(i,n)}function xn(i,n){return Math.max(i,n)}function Sn(i,n,e,t,r){const s=t/(t+r),a=r/(t+r);return s*i+a*n}function En(i,n){return(i+n)/2}function zn(i,n,e,t,r){const s=t/(t+r),a=r/(t+r),o=-(t*r)/(t+r)**2;return s*i+a*n+o*e}function Mn(i,n,e){return i/2+n/2-e/4}function Cn(i,n,e,t,r,s){const a=(t+s)/(t+r+s),o=(r+s)/(t+r+s),l=-s/(t+r+s);return a*i+o*n+l*e}function In(i,n,e,t,r,s){const a=(t+s)/(t+r+s),o=(r+s)/(t+r+s),l=-s/(t+r+s);return Math.sqrt(a*i*i+o*n*n+l*e*e)}function Qe(i,n={}){const{distanceFunction:e=ut,method:t="complete",isDistanceMatrix:r=!1}=n;let s;r||(i=pt(i,e));let a=new Xe(i);const o=a.rows;if(typeof t=="string")switch(t.toLowerCase()){case"single":s=kn;break;case"complete":s=xn;break;case"average":case"upgma":s=Sn;break;case"wpgma":s=En;break;case"centroid":case"upgmc":s=zn;break;case"median":case"wpgmc":s=Mn;break;case"ward":s=Cn;break;case"ward2":s=In;break;default:throw new RangeError(`unknown clustering method: ${t}`)}else if(typeof t!="function")throw new TypeError("method must be a string or function");let l=[];for(let u=0;u<o;u++){const p=new ue;p.isLeaf=!0,p.index=u,l.push(p)}for(let u=0;u<o-1;u++){const[p,f,b]=Rn(a),m=l[p],y=l[f],d=new ue;d.size=m.size+y.size,d.children.push(m,y),d.height=b;const _=[d],h=new Xe(a.rows-1,a.rows-1),g=v=>jn(v,Math.min(p,f),Math.max(p,f));for(let v=1;v<h.rows;v++){const E=g(v),M=l[E];_.push(M);for(let j=0;j<v;j++)if(j===0){const I=a.get(p,E),T=a.get(E,f),N=s(I,T,b,m.size,y.size,M.size);h.set(v,j,N),h.set(j,v,N)}else{const I=a.get(E,g(j));h.set(v,j,I),h.set(j,v,I)}}l=_,a=h}return l[0]}function Rn(i){let n=1/0,e=0,t=0;for(let r=1;r<i.rows;r++)for(let s=0;s<r;s++)i.get(r,s)<n&&(n=i.get(r,s),e=r,t=s);return[e,t,n]}function jn(i,n,e){return i-=1,i>=n&&i++,i>=e&&i++,i}var Tn={exports:{}};(function(i,n){(function(e,t){t()})(Mt,function(){function e(u,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function t(u,p,f){var b=new XMLHttpRequest;b.open("GET",u),b.responseType="blob",b.onload=function(){l(b.response,p,f)},b.onerror=function(){console.error("could not download file")},b.send()}function r(u){var p=new XMLHttpRequest;p.open("HEAD",u,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function s(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(p)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Mt=="object"&&Mt.global===Mt?Mt:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(u,p,f){var b=a.URL||a.webkitURL,m=document.createElement("a");p=p||u.name||"download",m.download=p,m.rel="noopener",typeof u=="string"?(m.href=u,m.origin===location.origin?s(m):r(m.href)?t(u,p,f):s(m,m.target="_blank")):(m.href=b.createObjectURL(u),setTimeout(function(){b.revokeObjectURL(m.href)},4e4),setTimeout(function(){s(m)},0))}:"msSaveOrOpenBlob"in navigator?function(u,p,f){if(p=p||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(e(u,f),p);else if(r(u))t(u,p,f);else{var b=document.createElement("a");b.href=u,b.target="_blank",setTimeout(function(){s(b)})}}:function(u,p,f,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof u=="string")return t(u,p,f);var m=u.type==="application/octet-stream",y=/constructor/i.test(a.HTMLElement)||a.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||m&&y||o)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var v=_.result;v=d?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=v:location=v,b=null},_.readAsDataURL(u)}else{var h=a.URL||a.webkitURL,g=h.createObjectURL(u);b?b.location=g:location.href=g,b=null,setTimeout(function(){h.revokeObjectURL(g)},4e4)}});a.saveAs=l.saveAs=l,i.exports=l})})(Tn);function fe(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Nn={exports:{}};/*!

    JSZip v3.10.1 - A JavaScript class for generating and reading zip files
    <http://stuartk.com/jszip>

    (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
    Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

    JSZip uses the library pako released under the MIT license :
    https://github.com/nodeca/pako/blob/main/LICENSE
    */(function(i,n){(function(e){i.exports=e()})(function(){return function e(t,r,s){function a(u,p){if(!r[u]){if(!t[u]){var f=typeof fe=="function"&&fe;if(!p&&f)return f(u,!0);if(o)return o(u,!0);var b=new Error("Cannot find module '"+u+"'");throw b.code="MODULE_NOT_FOUND",b}var m=r[u]={exports:{}};t[u][0].call(m.exports,function(y){var d=t[u][1][y];return a(d||y)},m,m.exports,e,t,r,s)}return r[u].exports}for(var o=typeof fe=="function"&&fe,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(e,t,r){var s=e("./utils"),a=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(l){for(var u,p,f,b,m,y,d,_=[],h=0,g=l.length,v=g,E=s.getTypeOf(l)!=="string";h<l.length;)v=g-h,f=E?(u=l[h++],p=h<g?l[h++]:0,h<g?l[h++]:0):(u=l.charCodeAt(h++),p=h<g?l.charCodeAt(h++):0,h<g?l.charCodeAt(h++):0),b=u>>2,m=(3&u)<<4|p>>4,y=1<v?(15&p)<<2|f>>6:64,d=2<v?63&f:64,_.push(o.charAt(b)+o.charAt(m)+o.charAt(y)+o.charAt(d));return _.join("")},r.decode=function(l){var u,p,f,b,m,y,d=0,_=0,h="data:";if(l.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var g,v=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&v--,l.charAt(l.length-2)===o.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=a.uint8array?new Uint8Array(0|v):new Array(0|v);d<l.length;)u=o.indexOf(l.charAt(d++))<<2|(b=o.indexOf(l.charAt(d++)))>>4,p=(15&b)<<4|(m=o.indexOf(l.charAt(d++)))>>2,f=(3&m)<<6|(y=o.indexOf(l.charAt(d++))),g[_++]=u,m!==64&&(g[_++]=p),y!==64&&(g[_++]=f);return g}},{"./support":30,"./utils":32}],2:[function(e,t,r){var s=e("./external"),a=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),l=e("./stream/DataLengthProbe");function u(p,f,b,m,y){this.compressedSize=p,this.uncompressedSize=f,this.crc32=b,this.compression=m,this.compressedContent=y}u.prototype={getContentWorker:function(){var p=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return p.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(p,f,b){return p.pipe(new o).pipe(new l("uncompressedSize")).pipe(f.compressWorker(b)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},t.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){var s=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){var s=e("./utils"),a=function(){for(var o,l=[],u=0;u<256;u++){o=u;for(var p=0;p<8;p++)o=1&o?3988292384^o>>>1:o>>>1;l[u]=o}return l}();t.exports=function(o,l){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(u,p,f,b){var m=a,y=b+f;u^=-1;for(var d=b;d<y;d++)u=u>>>8^m[255&(u^p[d])];return-1^u}(0|l,o,o.length,0):function(u,p,f,b){var m=a,y=b+f;u^=-1;for(var d=b;d<y;d++)u=u>>>8^m[255&(u^p.charCodeAt(d))];return-1^u}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(e,t,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){var s=null;s=typeof Promise<"u"?Promise:e("lie"),t.exports={Promise:s}},{lie:37}],7:[function(e,t,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=e("pako"),o=e("./utils"),l=e("./stream/GenericWorker"),u=s?"uint8array":"array";function p(f,b){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=b,this.meta={}}r.magic="\b\0",o.inherits(p,l),p.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,f.data),!1)},p.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(b){f.push({data:b,meta:f.meta})}},r.compressWorker=function(f){return new p("Deflate",f)},r.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){function s(m,y){var d,_="";for(d=0;d<y;d++)_+=String.fromCharCode(255&m),m>>>=8;return _}function a(m,y,d,_,h,g){var v,E,M=m.file,j=m.compression,I=g!==u.utf8encode,T=o.transformTo("string",g(M.name)),N=o.transformTo("string",u.utf8encode(M.name)),k=M.comment,O=o.transformTo("string",g(k)),x=o.transformTo("string",u.utf8encode(k)),C=N.length!==M.name.length,w=x.length!==k.length,F="",J="",P="",tt=M.dir,q=M.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};y&&!d||(Q.crc32=m.crc32,Q.compressedSize=m.compressedSize,Q.uncompressedSize=m.uncompressedSize);var A=0;y&&(A|=8),I||!C&&!w||(A|=2048);var D=0,V=0;tt&&(D|=16),h==="UNIX"?(V=798,D|=function(Z,ot){var st=Z;return Z||(st=ot?16893:33204),(65535&st)<<16}(M.unixPermissions,tt)):(V=20,D|=function(Z){return 63&(Z||0)}(M.dosPermissions)),v=q.getUTCHours(),v<<=6,v|=q.getUTCMinutes(),v<<=5,v|=q.getUTCSeconds()/2,E=q.getUTCFullYear()-1980,E<<=4,E|=q.getUTCMonth()+1,E<<=5,E|=q.getUTCDate(),C&&(J=s(1,1)+s(p(T),4)+N,F+="up"+s(J.length,2)+J),w&&(P=s(1,1)+s(p(O),4)+x,F+="uc"+s(P.length,2)+P);var Y="";return Y+=`
\0`,Y+=s(A,2),Y+=j.magic,Y+=s(v,2),Y+=s(E,2),Y+=s(Q.crc32,4),Y+=s(Q.compressedSize,4),Y+=s(Q.uncompressedSize,4),Y+=s(T.length,2),Y+=s(F.length,2),{fileRecord:f.LOCAL_FILE_HEADER+Y+T+F,dirRecord:f.CENTRAL_FILE_HEADER+s(V,2)+Y+s(O.length,2)+"\0\0\0\0"+s(D,4)+s(_,4)+T+F+O}}var o=e("../utils"),l=e("../stream/GenericWorker"),u=e("../utf8"),p=e("../crc32"),f=e("../signature");function b(m,y,d,_){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=d,this.encodeFileName=_,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(b,l),b.prototype.push=function(m){var y=m.meta.percent||0,d=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:d?(y+100*(d-_-1))/d:100}}))},b.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var y=this.streamFiles&&!m.file.dir;if(y){var d=a(m,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:d.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(m){this.accumulate=!1;var y=this.streamFiles&&!m.file.dir,d=a(m,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(d.dirRecord),y)this.push({data:function(_){return f.DATA_DESCRIPTOR+s(_.crc32,4)+s(_.compressedSize,4)+s(_.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:d.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var m=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var d=this.bytesWritten-m,_=function(h,g,v,E,M){var j=o.transformTo("string",M(E));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(h,2)+s(h,2)+s(g,4)+s(v,4)+s(j.length,2)+j}(this.dirRecords.length,d,m,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(m){this._sources.push(m);var y=this;return m.on("data",function(d){y.processChunk(d)}),m.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),m.on("error",function(d){y.error(d)}),this},b.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(m){var y=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var d=0;d<y.length;d++)try{y[d].error(m)}catch{}return!0},b.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,y=0;y<m.length;y++)m[y].lock()},t.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){var s=e("../compressions"),a=e("./ZipFileWorker");r.generateWorker=function(o,l,u){var p=new a(l.streamFiles,u,l.platform,l.encodeFileName),f=0;try{o.forEach(function(b,m){f++;var y=function(g,v){var E=g||v,M=s[E];if(!M)throw new Error(E+" is not a valid compression method !");return M}(m.options.compression,l.compression),d=m.options.compressionOptions||l.compressionOptions||{},_=m.dir,h=m.date;m._compressWorker(y,d).withStreamInfo("file",{name:b,dir:_,date:h,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(p)}),p.entriesCount=f}catch(b){p.error(b)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=e("./object")).loadAsync=e("./load"),s.support=e("./support"),s.defaults=e("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=e("./external"),t.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){var s=e("./utils"),a=e("./external"),o=e("./utf8"),l=e("./zipEntries"),u=e("./stream/Crc32Probe"),p=e("./nodejsUtils");function f(b){return new a.Promise(function(m,y){var d=b.decompressed.getContentWorker().pipe(new u);d.on("error",function(_){y(_)}).on("end",function(){d.streamInfo.crc32!==b.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}t.exports=function(b,m){var y=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),p.isNode&&p.isStream(b)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",b,!0,m.optimizedBinaryString,m.base64).then(function(d){var _=new l(m);return _.load(d),_}).then(function(d){var _=[a.Promise.resolve(d)],h=d.files;if(m.checkCRC32)for(var g=0;g<h.length;g++)_.push(f(h[g]));return a.Promise.all(_)}).then(function(d){for(var _=d.shift(),h=_.files,g=0;g<h.length;g++){var v=h[g],E=v.fileNameStr,M=s.resolve(v.fileNameStr);y.file(M,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:m.createFolders}),v.dir||(y.file(M).unsafeOriginalName=E)}return _.zipComment.length&&(y.comment=_.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){var s=e("../utils"),a=e("../stream/GenericWorker");function o(l,u){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(o,a),o.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(p){u.push({data:p,meta:{percent:0}})}).on("error",function(p){u.isPaused?this.generatedError=p:u.error(p)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){var s=e("readable-stream").Readable;function a(o,l,u){s.call(this,l),this._helper=o;var p=this;o.on("data",function(f,b){p.push(f)||p._helper.pause(),u&&u(b)}).on("error",function(f){p.emit("error",f)}).on("end",function(){p.push(null)})}e("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},t.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,t,r){t.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(e,t,r){function s(M,j,I){var T,N=o.getTypeOf(j),k=o.extend(I||{},p);k.date=k.date||new Date,k.compression!==null&&(k.compression=k.compression.toUpperCase()),typeof k.unixPermissions=="string"&&(k.unixPermissions=parseInt(k.unixPermissions,8)),k.unixPermissions&&16384&k.unixPermissions&&(k.dir=!0),k.dosPermissions&&16&k.dosPermissions&&(k.dir=!0),k.dir&&(M=h(M)),k.createFolders&&(T=_(M))&&g.call(this,T,!0);var O=N==="string"&&k.binary===!1&&k.base64===!1;I&&I.binary!==void 0||(k.binary=!O),(j instanceof f&&j.uncompressedSize===0||k.dir||!j||j.length===0)&&(k.base64=!1,k.binary=!0,j="",k.compression="STORE",N="string");var x=null;x=j instanceof f||j instanceof l?j:y.isNode&&y.isStream(j)?new d(M,j):o.prepareContent(M,j,k.binary,k.optimizedBinaryString,k.base64);var C=new b(M,x,k);this.files[M]=C}var a=e("./utf8"),o=e("./utils"),l=e("./stream/GenericWorker"),u=e("./stream/StreamHelper"),p=e("./defaults"),f=e("./compressedObject"),b=e("./zipObject"),m=e("./generate"),y=e("./nodejsUtils"),d=e("./nodejs/NodejsStreamInputAdapter"),_=function(M){M.slice(-1)==="/"&&(M=M.substring(0,M.length-1));var j=M.lastIndexOf("/");return 0<j?M.substring(0,j):""},h=function(M){return M.slice(-1)!=="/"&&(M+="/"),M},g=function(M,j){return j=j!==void 0?j:p.createFolders,M=h(M),this.files[M]||s.call(this,M,null,{dir:!0,createFolders:j}),this.files[M]};function v(M){return Object.prototype.toString.call(M)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(M){var j,I,T;for(j in this.files)T=this.files[j],(I=j.slice(this.root.length,j.length))&&j.slice(0,this.root.length)===this.root&&M(I,T)},filter:function(M){var j=[];return this.forEach(function(I,T){M(I,T)&&j.push(T)}),j},file:function(M,j,I){if(arguments.length!==1)return M=this.root+M,s.call(this,M,j,I),this;if(v(M)){var T=M;return this.filter(function(k,O){return!O.dir&&T.test(k)})}var N=this.files[this.root+M];return N&&!N.dir?N:null},folder:function(M){if(!M)return this;if(v(M))return this.filter(function(N,k){return k.dir&&M.test(N)});var j=this.root+M,I=g.call(this,j),T=this.clone();return T.root=I.name,T},remove:function(M){M=this.root+M;var j=this.files[M];if(j||(M.slice(-1)!=="/"&&(M+="/"),j=this.files[M]),j&&!j.dir)delete this.files[M];else for(var I=this.filter(function(N,k){return k.name.slice(0,M.length)===M}),T=0;T<I.length;T++)delete this.files[I[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(M){var j,I={};try{if((I=o.extend(M||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");o.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var T=I.comment||this.comment||"";j=m.generateWorker(this,I,T)}catch(N){(j=new l("error")).error(N)}return new u(j,I.type||"string",I.mimeType)},generateAsync:function(M,j){return this.generateInternalStream(M).accumulate(j)},generateNodeStream:function(M,j){return(M=M||{}).type||(M.type="nodebuffer"),this.generateInternalStream(M).toNodejsStream(j)}};t.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){var s=e("./DataReader");function a(o){s.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}e("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),u=o.charCodeAt(1),p=o.charCodeAt(2),f=o.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===l&&this.data[b+1]===u&&this.data[b+2]===p&&this.data[b+3]===f)return b-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),u=o.charCodeAt(1),p=o.charCodeAt(2),f=o.charCodeAt(3),b=this.readData(4);return l===b[0]&&u===b[1]&&p===b[2]&&f===b[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},t.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){var s=e("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,u=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=o,u},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},t.exports=a},{"../utils":32}],19:[function(e,t,r){var s=e("./Uint8ArrayReader");function a(o){s.call(this,o)}e("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},t.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){var s=e("./DataReader");function a(o){s.call(this,o)}e("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},t.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){var s=e("./ArrayReader");function a(o){s.call(this,o)}e("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},t.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){var s=e("../utils"),a=e("../support"),o=e("./ArrayReader"),l=e("./StringReader"),u=e("./NodeBufferReader"),p=e("./Uint8ArrayReader");t.exports=function(f){var b=s.getTypeOf(f);return s.checkSupport(b),b!=="string"||a.uint8array?b==="nodebuffer"?new u(f):a.uint8array?new p(s.transformTo("uint8array",f)):new o(s.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,r){var s=e("./GenericWorker"),a=e("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){var s=e("./GenericWorker"),a=e("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,s),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){var s=e("../utils"),a=e("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}a.prototype.processChunk.call(this,l)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){var s=e("../utils"),a=e("./GenericWorker");function o(l){a.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(p){u.dataIsReady=!0,u.data=p,u.max=p&&p.length||0,u.type=s.getTypeOf(p),u.isPaused||u._tickAndRepeat()},function(p){u.error(p)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},t.exports=s},{}],29:[function(e,t,r){var s=e("../utils"),a=e("./ConvertWorker"),o=e("./GenericWorker"),l=e("../base64"),u=e("../support"),p=e("../external"),f=null;if(u.nodestream)try{f=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(y,d){return new p.Promise(function(_,h){var g=[],v=y._internalType,E=y._outputType,M=y._mimeType;y.on("data",function(j,I){g.push(j),d&&d(I)}).on("error",function(j){g=[],h(j)}).on("end",function(){try{var j=function(I,T,N){switch(I){case"blob":return s.newBlob(s.transformTo("arraybuffer",T),N);case"base64":return l.encode(T);default:return s.transformTo(I,T)}}(E,function(I,T){var N,k=0,O=null,x=0;for(N=0;N<T.length;N++)x+=T[N].length;switch(I){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(O=new Uint8Array(x),N=0;N<T.length;N++)O.set(T[N],k),k+=T[N].length;return O;case"nodebuffer":return Buffer.concat(T);default:throw new Error("concat : unsupported type '"+I+"'")}}(v,g),M);_(j)}catch(I){h(I)}g=[]}).resume()})}function m(y,d,_){var h=d;switch(d){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=d,this._mimeType=_,s.checkSupport(h),this._worker=y.pipe(new a(h)),y.lock()}catch(g){this._worker=new o("error"),this._worker.error(g)}}m.prototype={accumulate:function(y){return b(this,y)},on:function(y,d){var _=this;return y==="data"?this._worker.on(y,function(h){d.call(_,h.data,h.meta)}):this._worker.on(y,function(){s.delay(d,arguments,_)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},y)}},t.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),r.blob=a.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){for(var s=e("./utils"),a=e("./support"),o=e("./nodejsUtils"),l=e("./stream/GenericWorker"),u=new Array(256),p=0;p<256;p++)u[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;u[254]=u[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function b(){l.call(this,"utf-8 encode")}r.utf8encode=function(m){return a.nodebuffer?o.newBufferFrom(m,"utf-8"):function(y){var d,_,h,g,v,E=y.length,M=0;for(g=0;g<E;g++)(64512&(_=y.charCodeAt(g)))==55296&&g+1<E&&(64512&(h=y.charCodeAt(g+1)))==56320&&(_=65536+(_-55296<<10)+(h-56320),g++),M+=_<128?1:_<2048?2:_<65536?3:4;for(d=a.uint8array?new Uint8Array(M):new Array(M),g=v=0;v<M;g++)(64512&(_=y.charCodeAt(g)))==55296&&g+1<E&&(64512&(h=y.charCodeAt(g+1)))==56320&&(_=65536+(_-55296<<10)+(h-56320),g++),_<128?d[v++]=_:(_<2048?d[v++]=192|_>>>6:(_<65536?d[v++]=224|_>>>12:(d[v++]=240|_>>>18,d[v++]=128|_>>>12&63),d[v++]=128|_>>>6&63),d[v++]=128|63&_);return d}(m)},r.utf8decode=function(m){return a.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):function(y){var d,_,h,g,v=y.length,E=new Array(2*v);for(d=_=0;d<v;)if((h=y[d++])<128)E[_++]=h;else if(4<(g=u[h]))E[_++]=65533,d+=g-1;else{for(h&=g===2?31:g===3?15:7;1<g&&d<v;)h=h<<6|63&y[d++],g--;1<g?E[_++]=65533:h<65536?E[_++]=h:(h-=65536,E[_++]=55296|h>>10&1023,E[_++]=56320|1023&h)}return E.length!==_&&(E.subarray?E=E.subarray(0,_):E.length=_),s.applyFromCharCode(E)}(m=s.transformTo(a.uint8array?"uint8array":"array",m))},s.inherits(f,l),f.prototype.processChunk=function(m){var y=s.transformTo(a.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var d=y;(y=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),y.set(d,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var _=function(g,v){var E;for((v=v||g.length)>g.length&&(v=g.length),E=v-1;0<=E&&(192&g[E])==128;)E--;return E<0||E===0?v:E+u[g[E]]>v?E:v}(y),h=y;_!==y.length&&(a.uint8array?(h=y.subarray(0,_),this.leftOver=y.subarray(_,y.length)):(h=y.slice(0,_),this.leftOver=y.slice(_,y.length))),this.push({data:r.utf8decode(h),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=f,s.inherits(b,l),b.prototype.processChunk=function(m){this.push({data:r.utf8encode(m.data),meta:m.meta})},r.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,r){var s=e("./support"),a=e("./base64"),o=e("./nodejsUtils"),l=e("./external");function u(d){return d}function p(d,_){for(var h=0;h<d.length;++h)_[h]=255&d.charCodeAt(h);return _}e("setimmediate"),r.newBlob=function(d,_){r.checkSupport("blob");try{return new Blob([d],{type:_})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(d),h.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(d,_,h){var g=[],v=0,E=d.length;if(E<=h)return String.fromCharCode.apply(null,d);for(;v<E;)_==="array"||_==="nodebuffer"?g.push(String.fromCharCode.apply(null,d.slice(v,Math.min(v+h,E)))):g.push(String.fromCharCode.apply(null,d.subarray(v,Math.min(v+h,E)))),v+=h;return g.join("")},stringifyByChar:function(d){for(var _="",h=0;h<d.length;h++)_+=String.fromCharCode(d[h]);return _},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function b(d){var _=65536,h=r.getTypeOf(d),g=!0;if(h==="uint8array"?g=f.applyCanBeUsed.uint8array:h==="nodebuffer"&&(g=f.applyCanBeUsed.nodebuffer),g)for(;1<_;)try{return f.stringifyByChunk(d,h,_)}catch{_=Math.floor(_/2)}return f.stringifyByChar(d)}function m(d,_){for(var h=0;h<d.length;h++)_[h]=d[h];return _}r.applyFromCharCode=b;var y={};y.string={string:u,array:function(d){return p(d,new Array(d.length))},arraybuffer:function(d){return y.string.uint8array(d).buffer},uint8array:function(d){return p(d,new Uint8Array(d.length))},nodebuffer:function(d){return p(d,o.allocBuffer(d.length))}},y.array={string:b,array:u,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return o.newBufferFrom(d)}},y.arraybuffer={string:function(d){return b(new Uint8Array(d))},array:function(d){return m(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:u,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return o.newBufferFrom(new Uint8Array(d))}},y.uint8array={string:b,array:function(d){return m(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:u,nodebuffer:function(d){return o.newBufferFrom(d)}},y.nodebuffer={string:b,array:function(d){return m(d,new Array(d.length))},arraybuffer:function(d){return y.nodebuffer.uint8array(d).buffer},uint8array:function(d){return m(d,new Uint8Array(d.length))},nodebuffer:u},r.transformTo=function(d,_){if(_=_||"",!d)return _;r.checkSupport(d);var h=r.getTypeOf(_);return y[h][d](_)},r.resolve=function(d){for(var _=d.split("/"),h=[],g=0;g<_.length;g++){var v=_[g];v==="."||v===""&&g!==0&&g!==_.length-1||(v===".."?h.pop():h.push(v))}return h.join("/")},r.getTypeOf=function(d){return typeof d=="string"?"string":Object.prototype.toString.call(d)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(d)?"nodebuffer":s.uint8array&&d instanceof Uint8Array?"uint8array":s.arraybuffer&&d instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(d){if(!s[d.toLowerCase()])throw new Error(d+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(d){var _,h,g="";for(h=0;h<(d||"").length;h++)g+="\\x"+((_=d.charCodeAt(h))<16?"0":"")+_.toString(16).toUpperCase();return g},r.delay=function(d,_,h){setImmediate(function(){d.apply(h||null,_||[])})},r.inherits=function(d,_){function h(){}h.prototype=_.prototype,d.prototype=new h},r.extend=function(){var d,_,h={};for(d=0;d<arguments.length;d++)for(_ in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],_)&&h[_]===void 0&&(h[_]=arguments[d][_]);return h},r.prepareContent=function(d,_,h,g,v){return l.Promise.resolve(_).then(function(E){return s.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new l.Promise(function(M,j){var I=new FileReader;I.onload=function(T){M(T.target.result)},I.onerror=function(T){j(T.target.error)},I.readAsArrayBuffer(E)}):E}).then(function(E){var M=r.getTypeOf(E);return M?(M==="arraybuffer"?E=r.transformTo("uint8array",E):M==="string"&&(v?E=a.decode(E):h&&g!==!0&&(E=function(j){return p(j,s.uint8array?new Uint8Array(j.length):new Array(j.length))}(E))),E):l.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,r){var s=e("./reader/readerFor"),a=e("./utils"),o=e("./signature"),l=e("./zipEntry"),u=e("./support");function p(f){this.files=[],this.loadOptions=f}p.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(b)+", expected "+a.pretty(f)+")")}},isSignature:function(f,b){var m=this.reader.index;this.reader.setIndex(f);var y=this.reader.readString(4)===b;return this.reader.setIndex(m),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),b=u.uint8array?"uint8array":"array",m=a.transformTo(b,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,b,m,y=this.zip64EndOfCentralSize-44;0<y;)f=this.reader.readInt(2),b=this.reader.readInt(4),m=this.reader.readData(b),this.zip64ExtensibleData[f]={id:f,length:b,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,b;for(f=0;f<this.files.length;f++)b=this.files[f],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var b=f;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var y=b-m;if(0<y)this.isSignature(b,o.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(f){this.reader=s(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){var s=e("./reader/readerFor"),a=e("./utils"),o=e("./compressedObject"),l=e("./crc32"),u=e("./utf8"),p=e("./compressions"),f=e("./support");function b(m,y){this.options=m,this.loadOptions=y}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var y,d;if(m.skip(22),this.fileNameLength=m.readInt(2),d=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(d),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(_){for(var h in p)if(Object.prototype.hasOwnProperty.call(p,h)&&p[h].magic===_)return p[h];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,y,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var y=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(y),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var y,d,_,h=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<h;)y=m.readInt(2),d=m.readInt(2),_=m.readData(d),this.extraFields[y]={id:y,length:d,value:_};m.setIndex(h)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var d=a.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(d)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var h=a.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var y=s(m.value);return y.readInt(1)!==1||l(this.fileName)!==y.readInt(4)?null:u.utf8decode(y.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var y=s(m.value);return y.readInt(1)!==1||l(this.fileComment)!==y.readInt(4)?null:u.utf8decode(y.readData(m.length-5))}return null}},t.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){function s(y,d,_){this.name=y,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=d,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var a=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),l=e("./utf8"),u=e("./compressedObject"),p=e("./stream/GenericWorker");s.prototype={internalStream:function(y){var d=null,_="string";try{if(!y)throw new Error("No output type specified.");var h=(_=y.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),d=this._decompressWorker();var g=!this._dataBinary;g&&!h&&(d=d.pipe(new l.Utf8EncodeWorker)),!g&&h&&(d=d.pipe(new l.Utf8DecodeWorker))}catch(v){(d=new p("error")).error(v)}return new a(d,_,"")},async:function(y,d){return this.internalStream(y).accumulate(d)},nodeStream:function(y,d){return this.internalStream(y||"nodebuffer").toNodejsStream(d)},_compressWorker:function(y,d){if(this._data instanceof u&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(_,y,d)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof p?this._data:new o(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)s.prototype[f[m]]=b;t.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(s){var a,o,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var u=0,p=new l(y),f=s.document.createTextNode("");p.observe(f,{characterData:!0}),a=function(){f.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var d=s.document.createElement("script");d.onreadystatechange=function(){y(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},s.document.documentElement.appendChild(d)}:function(){setTimeout(y,0)};else{var b=new s.MessageChannel;b.port1.onmessage=y,a=function(){b.port2.postMessage(0)}}var m=[];function y(){var d,_;o=!0;for(var h=m.length;h;){for(_=m,m=[],d=-1;++d<h;)_[d]();h=m.length}o=!1}t.exports=function(d){m.push(d)!==1||o||a()}}).call(this,typeof Mt<"u"?Mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,t,r){var s=e("immediate");function a(){}var o={},l=["REJECTED"],u=["FULFILLED"],p=["PENDING"];function f(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,h!==a&&d(this,h)}function b(h,g,v){this.promise=h,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function m(h,g,v){s(function(){var E;try{E=g(v)}catch(M){return o.reject(h,M)}E===h?o.reject(h,new TypeError("Cannot resolve promise with itself")):o.resolve(h,E)})}function y(h){var g=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof g=="function")return function(){g.apply(h,arguments)}}function d(h,g){var v=!1;function E(I){v||(v=!0,o.reject(h,I))}function M(I){v||(v=!0,o.resolve(h,I))}var j=_(function(){g(M,E)});j.status==="error"&&E(j.value)}function _(h,g){var v={};try{v.value=h(g),v.status="success"}catch(E){v.status="error",v.value=E}return v}(t.exports=f).prototype.finally=function(h){if(typeof h!="function")return this;var g=this.constructor;return this.then(function(v){return g.resolve(h()).then(function(){return v})},function(v){return g.resolve(h()).then(function(){throw v})})},f.prototype.catch=function(h){return this.then(null,h)},f.prototype.then=function(h,g){if(typeof h!="function"&&this.state===u||typeof g!="function"&&this.state===l)return this;var v=new this.constructor(a);return this.state!==p?m(v,this.state===u?h:g,this.outcome):this.queue.push(new b(v,h,g)),v},b.prototype.callFulfilled=function(h){o.resolve(this.promise,h)},b.prototype.otherCallFulfilled=function(h){m(this.promise,this.onFulfilled,h)},b.prototype.callRejected=function(h){o.reject(this.promise,h)},b.prototype.otherCallRejected=function(h){m(this.promise,this.onRejected,h)},o.resolve=function(h,g){var v=_(y,g);if(v.status==="error")return o.reject(h,v.value);var E=v.value;if(E)d(h,E);else{h.state=u,h.outcome=g;for(var M=-1,j=h.queue.length;++M<j;)h.queue[M].callFulfilled(g)}return h},o.reject=function(h,g){h.state=l,h.outcome=g;for(var v=-1,E=h.queue.length;++v<E;)h.queue[v].callRejected(g);return h},f.resolve=function(h){return h instanceof this?h:o.resolve(new this(a),h)},f.reject=function(h){var g=new this(a);return o.reject(g,h)},f.all=function(h){var g=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=h.length,E=!1;if(!v)return this.resolve([]);for(var M=new Array(v),j=0,I=-1,T=new this(a);++I<v;)N(h[I],I);return T;function N(k,O){g.resolve(k).then(function(x){M[O]=x,++j!==v||E||(E=!0,o.resolve(T,M))},function(x){E||(E=!0,o.reject(T,x))})}},f.race=function(h){var g=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=h.length,E=!1;if(!v)return this.resolve([]);for(var M=-1,j=new this(a);++M<v;)I=h[M],g.resolve(I).then(function(T){E||(E=!0,o.resolve(j,T))},function(T){E||(E=!0,o.reject(j,T))});var I;return j}},{immediate:36}],38:[function(e,t,r){var s={};(0,e("./lib/utils/common").assign)(s,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){var s=e("./zlib/deflate"),a=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/messages"),u=e("./zlib/zstream"),p=Object.prototype.toString,f=0,b=-1,m=0,y=8;function d(h){if(!(this instanceof d))return new d(h);this.options=a.assign({level:b,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},h||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var v=s.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(v!==f)throw new Error(l[v]);if(g.header&&s.deflateSetHeader(this.strm,g.header),g.dictionary){var E;if(E=typeof g.dictionary=="string"?o.string2buf(g.dictionary):p.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(v=s.deflateSetDictionary(this.strm,E))!==f)throw new Error(l[v]);this._dict_set=!0}}function _(h,g){var v=new d(g);if(v.push(h,!0),v.err)throw v.msg||l[v.err];return v.result}d.prototype.push=function(h,g){var v,E,M=this.strm,j=this.options.chunkSize;if(this.ended)return!1;E=g===~~g?g:g===!0?4:0,typeof h=="string"?M.input=o.string2buf(h):p.call(h)==="[object ArrayBuffer]"?M.input=new Uint8Array(h):M.input=h,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new a.Buf8(j),M.next_out=0,M.avail_out=j),(v=s.deflate(M,E))!==1&&v!==f)return this.onEnd(v),!(this.ended=!0);M.avail_out!==0&&(M.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(M.output,M.next_out))):this.onData(a.shrinkBuf(M.output,M.next_out)))}while((0<M.avail_in||M.avail_out===0)&&v!==1);return E===4?(v=s.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===f):E!==2||(this.onEnd(f),!(M.avail_out=0))},d.prototype.onData=function(h){this.chunks.push(h)},d.prototype.onEnd=function(h){h===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},r.Deflate=d,r.deflate=_,r.deflateRaw=function(h,g){return(g=g||{}).raw=!0,_(h,g)},r.gzip=function(h,g){return(g=g||{}).gzip=!0,_(h,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){var s=e("./zlib/inflate"),a=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/constants"),u=e("./zlib/messages"),p=e("./zlib/zstream"),f=e("./zlib/gzheader"),b=Object.prototype.toString;function m(d){if(!(this instanceof m))return new m(d);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},d||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||d&&d.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var h=s.inflateInit2(this.strm,_.windowBits);if(h!==l.Z_OK)throw new Error(u[h]);this.header=new f,s.inflateGetHeader(this.strm,this.header)}function y(d,_){var h=new m(_);if(h.push(d,!0),h.err)throw h.msg||u[h.err];return h.result}m.prototype.push=function(d,_){var h,g,v,E,M,j,I=this.strm,T=this.options.chunkSize,N=this.options.dictionary,k=!1;if(this.ended)return!1;g=_===~~_?_:_===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof d=="string"?I.input=o.binstring2buf(d):b.call(d)==="[object ArrayBuffer]"?I.input=new Uint8Array(d):I.input=d,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new a.Buf8(T),I.next_out=0,I.avail_out=T),(h=s.inflate(I,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&N&&(j=typeof N=="string"?o.string2buf(N):b.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,h=s.inflateSetDictionary(this.strm,j)),h===l.Z_BUF_ERROR&&k===!0&&(h=l.Z_OK,k=!1),h!==l.Z_STREAM_END&&h!==l.Z_OK)return this.onEnd(h),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&h!==l.Z_STREAM_END&&(I.avail_in!==0||g!==l.Z_FINISH&&g!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=o.utf8border(I.output,I.next_out),E=I.next_out-v,M=o.buf2string(I.output,v),I.next_out=E,I.avail_out=T-E,E&&a.arraySet(I.output,I.output,v,E,0),this.onData(M)):this.onData(a.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(k=!0)}while((0<I.avail_in||I.avail_out===0)&&h!==l.Z_STREAM_END);return h===l.Z_STREAM_END&&(g=l.Z_FINISH),g===l.Z_FINISH?(h=s.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===l.Z_OK):g!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(I.avail_out=0))},m.prototype.onData=function(d){this.chunks.push(d)},m.prototype.onEnd=function(d){d===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},r.Inflate=m,r.inflate=y,r.inflateRaw=function(d,_){return(_=_||{}).raw=!0,y(d,_)},r.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var p=u.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var f in p)p.hasOwnProperty(f)&&(l[f]=p[f])}}return l},r.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var a={arraySet:function(l,u,p,f,b){if(u.subarray&&l.subarray)l.set(u.subarray(p,p+f),b);else for(var m=0;m<f;m++)l[b+m]=u[p+m]},flattenChunks:function(l){var u,p,f,b,m,y;for(u=f=0,p=l.length;u<p;u++)f+=l[u].length;for(y=new Uint8Array(f),u=b=0,p=l.length;u<p;u++)m=l[u],y.set(m,b),b+=m.length;return y}},o={arraySet:function(l,u,p,f,b){for(var m=0;m<f;m++)l[b+m]=u[p+m]},flattenChunks:function(l){return[].concat.apply([],l)}};r.setTyped=function(l){l?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(s)},{}],42:[function(e,t,r){var s=e("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function p(f,b){if(b<65537&&(f.subarray&&o||!f.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(f,b));for(var m="",y=0;y<b;y++)m+=String.fromCharCode(f[y]);return m}l[254]=l[254]=1,r.string2buf=function(f){var b,m,y,d,_,h=f.length,g=0;for(d=0;d<h;d++)(64512&(m=f.charCodeAt(d)))==55296&&d+1<h&&(64512&(y=f.charCodeAt(d+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),d++),g+=m<128?1:m<2048?2:m<65536?3:4;for(b=new s.Buf8(g),d=_=0;_<g;d++)(64512&(m=f.charCodeAt(d)))==55296&&d+1<h&&(64512&(y=f.charCodeAt(d+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),d++),m<128?b[_++]=m:(m<2048?b[_++]=192|m>>>6:(m<65536?b[_++]=224|m>>>12:(b[_++]=240|m>>>18,b[_++]=128|m>>>12&63),b[_++]=128|m>>>6&63),b[_++]=128|63&m);return b},r.buf2binstring=function(f){return p(f,f.length)},r.binstring2buf=function(f){for(var b=new s.Buf8(f.length),m=0,y=b.length;m<y;m++)b[m]=f.charCodeAt(m);return b},r.buf2string=function(f,b){var m,y,d,_,h=b||f.length,g=new Array(2*h);for(m=y=0;m<h;)if((d=f[m++])<128)g[y++]=d;else if(4<(_=l[d]))g[y++]=65533,m+=_-1;else{for(d&=_===2?31:_===3?15:7;1<_&&m<h;)d=d<<6|63&f[m++],_--;1<_?g[y++]=65533:d<65536?g[y++]=d:(d-=65536,g[y++]=55296|d>>10&1023,g[y++]=56320|1023&d)}return p(g,y)},r.utf8border=function(f,b){var m;for((b=b||f.length)>f.length&&(b=f.length),m=b-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?b:m+l[f[m]]>b?m:b}},{"./common":41}],43:[function(e,t,r){t.exports=function(s,a,o,l){for(var u=65535&s|0,p=s>>>16&65535|0,f=0;o!==0;){for(o-=f=2e3<o?2e3:o;p=p+(u=u+a[l++]|0)|0,--f;);u%=65521,p%=65521}return u|p<<16|0}},{}],44:[function(e,t,r){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){var s=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();t.exports=function(a,o,l,u){var p=s,f=u+l;a^=-1;for(var b=u;b<f;b++)a=a>>>8^p[255&(a^o[b])];return-1^a}},{}],46:[function(e,t,r){var s,a=e("../utils/common"),o=e("./trees"),l=e("./adler32"),u=e("./crc32"),p=e("./messages"),f=0,b=4,m=0,y=-2,d=-1,_=4,h=2,g=8,v=9,E=286,M=30,j=19,I=2*E+1,T=15,N=3,k=258,O=k+N+1,x=42,C=113,w=1,F=2,J=3,P=4;function tt(c,U){return c.msg=p[U],U}function q(c){return(c<<1)-(4<c?9:0)}function Q(c){for(var U=c.length;0<=--U;)c[U]=0}function A(c){var U=c.state,L=U.pending;L>c.avail_out&&(L=c.avail_out),L!==0&&(a.arraySet(c.output,U.pending_buf,U.pending_out,L,c.next_out),c.next_out+=L,U.pending_out+=L,c.total_out+=L,c.avail_out-=L,U.pending-=L,U.pending===0&&(U.pending_out=0))}function D(c,U){o._tr_flush_block(c,0<=c.block_start?c.block_start:-1,c.strstart-c.block_start,U),c.block_start=c.strstart,A(c.strm)}function V(c,U){c.pending_buf[c.pending++]=U}function Y(c,U){c.pending_buf[c.pending++]=U>>>8&255,c.pending_buf[c.pending++]=255&U}function Z(c,U){var L,z,S=c.max_chain_length,R=c.strstart,$=c.prev_length,W=c.nice_match,B=c.strstart>c.w_size-O?c.strstart-(c.w_size-O):0,G=c.window,H=c.w_mask,K=c.prev,et=c.strstart+k,ht=G[R+$-1],at=G[R+$];c.prev_length>=c.good_match&&(S>>=2),W>c.lookahead&&(W=c.lookahead);do if(G[(L=U)+$]===at&&G[L+$-1]===ht&&G[L]===G[R]&&G[++L]===G[R+1]){R+=2,L++;do;while(G[++R]===G[++L]&&G[++R]===G[++L]&&G[++R]===G[++L]&&G[++R]===G[++L]&&G[++R]===G[++L]&&G[++R]===G[++L]&&G[++R]===G[++L]&&G[++R]===G[++L]&&R<et);if(z=k-(et-R),R=et-k,$<z){if(c.match_start=U,W<=($=z))break;ht=G[R+$-1],at=G[R+$]}}while((U=K[U&H])>B&&--S!=0);return $<=c.lookahead?$:c.lookahead}function ot(c){var U,L,z,S,R,$,W,B,G,H,K=c.w_size;do{if(S=c.window_size-c.lookahead-c.strstart,c.strstart>=K+(K-O)){for(a.arraySet(c.window,c.window,K,K,0),c.match_start-=K,c.strstart-=K,c.block_start-=K,U=L=c.hash_size;z=c.head[--U],c.head[U]=K<=z?z-K:0,--L;);for(U=L=K;z=c.prev[--U],c.prev[U]=K<=z?z-K:0,--L;);S+=K}if(c.strm.avail_in===0)break;if($=c.strm,W=c.window,B=c.strstart+c.lookahead,G=S,H=void 0,H=$.avail_in,G<H&&(H=G),L=H===0?0:($.avail_in-=H,a.arraySet(W,$.input,$.next_in,H,B),$.state.wrap===1?$.adler=l($.adler,W,H,B):$.state.wrap===2&&($.adler=u($.adler,W,H,B)),$.next_in+=H,$.total_in+=H,H),c.lookahead+=L,c.lookahead+c.insert>=N)for(R=c.strstart-c.insert,c.ins_h=c.window[R],c.ins_h=(c.ins_h<<c.hash_shift^c.window[R+1])&c.hash_mask;c.insert&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[R+N-1])&c.hash_mask,c.prev[R&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=R,R++,c.insert--,!(c.lookahead+c.insert<N)););}while(c.lookahead<O&&c.strm.avail_in!==0)}function st(c,U){for(var L,z;;){if(c.lookahead<O){if(ot(c),c.lookahead<O&&U===f)return w;if(c.lookahead===0)break}if(L=0,c.lookahead>=N&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+N-1])&c.hash_mask,L=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),L!==0&&c.strstart-L<=c.w_size-O&&(c.match_length=Z(c,L)),c.match_length>=N)if(z=o._tr_tally(c,c.strstart-c.match_start,c.match_length-N),c.lookahead-=c.match_length,c.match_length<=c.max_lazy_match&&c.lookahead>=N){for(c.match_length--;c.strstart++,c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+N-1])&c.hash_mask,L=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart,--c.match_length!=0;);c.strstart++}else c.strstart+=c.match_length,c.match_length=0,c.ins_h=c.window[c.strstart],c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+1])&c.hash_mask;else z=o._tr_tally(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++;if(z&&(D(c,!1),c.strm.avail_out===0))return w}return c.insert=c.strstart<N-1?c.strstart:N-1,U===b?(D(c,!0),c.strm.avail_out===0?J:P):c.last_lit&&(D(c,!1),c.strm.avail_out===0)?w:F}function it(c,U){for(var L,z,S;;){if(c.lookahead<O){if(ot(c),c.lookahead<O&&U===f)return w;if(c.lookahead===0)break}if(L=0,c.lookahead>=N&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+N-1])&c.hash_mask,L=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),c.prev_length=c.match_length,c.prev_match=c.match_start,c.match_length=N-1,L!==0&&c.prev_length<c.max_lazy_match&&c.strstart-L<=c.w_size-O&&(c.match_length=Z(c,L),c.match_length<=5&&(c.strategy===1||c.match_length===N&&4096<c.strstart-c.match_start)&&(c.match_length=N-1)),c.prev_length>=N&&c.match_length<=c.prev_length){for(S=c.strstart+c.lookahead-N,z=o._tr_tally(c,c.strstart-1-c.prev_match,c.prev_length-N),c.lookahead-=c.prev_length-1,c.prev_length-=2;++c.strstart<=S&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+N-1])&c.hash_mask,L=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),--c.prev_length!=0;);if(c.match_available=0,c.match_length=N-1,c.strstart++,z&&(D(c,!1),c.strm.avail_out===0))return w}else if(c.match_available){if((z=o._tr_tally(c,0,c.window[c.strstart-1]))&&D(c,!1),c.strstart++,c.lookahead--,c.strm.avail_out===0)return w}else c.match_available=1,c.strstart++,c.lookahead--}return c.match_available&&(z=o._tr_tally(c,0,c.window[c.strstart-1]),c.match_available=0),c.insert=c.strstart<N-1?c.strstart:N-1,U===b?(D(c,!0),c.strm.avail_out===0?J:P):c.last_lit&&(D(c,!1),c.strm.avail_out===0)?w:F}function lt(c,U,L,z,S){this.good_length=c,this.max_lazy=U,this.nice_length=L,this.max_chain=z,this.func=S}function mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*I),this.dyn_dtree=new a.Buf16(2*(2*M+1)),this.bl_tree=new a.Buf16(2*(2*j+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(T+1),this.heap=new a.Buf16(2*E+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*E+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ct(c){var U;return c&&c.state?(c.total_in=c.total_out=0,c.data_type=h,(U=c.state).pending=0,U.pending_out=0,U.wrap<0&&(U.wrap=-U.wrap),U.status=U.wrap?x:C,c.adler=U.wrap===2?0:1,U.last_flush=f,o._tr_init(U),m):tt(c,y)}function xt(c){var U=ct(c);return U===m&&function(L){L.window_size=2*L.w_size,Q(L.head),L.max_lazy_match=s[L.level].max_lazy,L.good_match=s[L.level].good_length,L.nice_match=s[L.level].nice_length,L.max_chain_length=s[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=N-1,L.match_available=0,L.ins_h=0}(c.state),U}function _t(c,U,L,z,S,R){if(!c)return y;var $=1;if(U===d&&(U=6),z<0?($=0,z=-z):15<z&&($=2,z-=16),S<1||v<S||L!==g||z<8||15<z||U<0||9<U||R<0||_<R)return tt(c,y);z===8&&(z=9);var W=new mt;return(c.state=W).strm=c,W.wrap=$,W.gzhead=null,W.w_bits=z,W.w_size=1<<W.w_bits,W.w_mask=W.w_size-1,W.hash_bits=S+7,W.hash_size=1<<W.hash_bits,W.hash_mask=W.hash_size-1,W.hash_shift=~~((W.hash_bits+N-1)/N),W.window=new a.Buf8(2*W.w_size),W.head=new a.Buf16(W.hash_size),W.prev=new a.Buf16(W.w_size),W.lit_bufsize=1<<S+6,W.pending_buf_size=4*W.lit_bufsize,W.pending_buf=new a.Buf8(W.pending_buf_size),W.d_buf=1*W.lit_bufsize,W.l_buf=3*W.lit_bufsize,W.level=U,W.strategy=R,W.method=L,xt(c)}s=[new lt(0,0,0,0,function(c,U){var L=65535;for(L>c.pending_buf_size-5&&(L=c.pending_buf_size-5);;){if(c.lookahead<=1){if(ot(c),c.lookahead===0&&U===f)return w;if(c.lookahead===0)break}c.strstart+=c.lookahead,c.lookahead=0;var z=c.block_start+L;if((c.strstart===0||c.strstart>=z)&&(c.lookahead=c.strstart-z,c.strstart=z,D(c,!1),c.strm.avail_out===0)||c.strstart-c.block_start>=c.w_size-O&&(D(c,!1),c.strm.avail_out===0))return w}return c.insert=0,U===b?(D(c,!0),c.strm.avail_out===0?J:P):(c.strstart>c.block_start&&(D(c,!1),c.strm.avail_out),w)}),new lt(4,4,8,4,st),new lt(4,5,16,8,st),new lt(4,6,32,32,st),new lt(4,4,16,16,it),new lt(8,16,32,32,it),new lt(8,16,128,128,it),new lt(8,32,128,256,it),new lt(32,128,258,1024,it),new lt(32,258,258,4096,it)],r.deflateInit=function(c,U){return _t(c,U,g,15,8,0)},r.deflateInit2=_t,r.deflateReset=xt,r.deflateResetKeep=ct,r.deflateSetHeader=function(c,U){return c&&c.state?c.state.wrap!==2?y:(c.state.gzhead=U,m):y},r.deflate=function(c,U){var L,z,S,R;if(!c||!c.state||5<U||U<0)return c?tt(c,y):y;if(z=c.state,!c.output||!c.input&&c.avail_in!==0||z.status===666&&U!==b)return tt(c,c.avail_out===0?-5:y);if(z.strm=c,L=z.last_flush,z.last_flush=U,z.status===x)if(z.wrap===2)c.adler=0,V(z,31),V(z,139),V(z,8),z.gzhead?(V(z,(z.gzhead.text?1:0)+(z.gzhead.hcrc?2:0)+(z.gzhead.extra?4:0)+(z.gzhead.name?8:0)+(z.gzhead.comment?16:0)),V(z,255&z.gzhead.time),V(z,z.gzhead.time>>8&255),V(z,z.gzhead.time>>16&255),V(z,z.gzhead.time>>24&255),V(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),V(z,255&z.gzhead.os),z.gzhead.extra&&z.gzhead.extra.length&&(V(z,255&z.gzhead.extra.length),V(z,z.gzhead.extra.length>>8&255)),z.gzhead.hcrc&&(c.adler=u(c.adler,z.pending_buf,z.pending,0)),z.gzindex=0,z.status=69):(V(z,0),V(z,0),V(z,0),V(z,0),V(z,0),V(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),V(z,3),z.status=C);else{var $=g+(z.w_bits-8<<4)<<8;$|=(2<=z.strategy||z.level<2?0:z.level<6?1:z.level===6?2:3)<<6,z.strstart!==0&&($|=32),$+=31-$%31,z.status=C,Y(z,$),z.strstart!==0&&(Y(z,c.adler>>>16),Y(z,65535&c.adler)),c.adler=1}if(z.status===69)if(z.gzhead.extra){for(S=z.pending;z.gzindex<(65535&z.gzhead.extra.length)&&(z.pending!==z.pending_buf_size||(z.gzhead.hcrc&&z.pending>S&&(c.adler=u(c.adler,z.pending_buf,z.pending-S,S)),A(c),S=z.pending,z.pending!==z.pending_buf_size));)V(z,255&z.gzhead.extra[z.gzindex]),z.gzindex++;z.gzhead.hcrc&&z.pending>S&&(c.adler=u(c.adler,z.pending_buf,z.pending-S,S)),z.gzindex===z.gzhead.extra.length&&(z.gzindex=0,z.status=73)}else z.status=73;if(z.status===73)if(z.gzhead.name){S=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>S&&(c.adler=u(c.adler,z.pending_buf,z.pending-S,S)),A(c),S=z.pending,z.pending===z.pending_buf_size)){R=1;break}R=z.gzindex<z.gzhead.name.length?255&z.gzhead.name.charCodeAt(z.gzindex++):0,V(z,R)}while(R!==0);z.gzhead.hcrc&&z.pending>S&&(c.adler=u(c.adler,z.pending_buf,z.pending-S,S)),R===0&&(z.gzindex=0,z.status=91)}else z.status=91;if(z.status===91)if(z.gzhead.comment){S=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>S&&(c.adler=u(c.adler,z.pending_buf,z.pending-S,S)),A(c),S=z.pending,z.pending===z.pending_buf_size)){R=1;break}R=z.gzindex<z.gzhead.comment.length?255&z.gzhead.comment.charCodeAt(z.gzindex++):0,V(z,R)}while(R!==0);z.gzhead.hcrc&&z.pending>S&&(c.adler=u(c.adler,z.pending_buf,z.pending-S,S)),R===0&&(z.status=103)}else z.status=103;if(z.status===103&&(z.gzhead.hcrc?(z.pending+2>z.pending_buf_size&&A(c),z.pending+2<=z.pending_buf_size&&(V(z,255&c.adler),V(z,c.adler>>8&255),c.adler=0,z.status=C)):z.status=C),z.pending!==0){if(A(c),c.avail_out===0)return z.last_flush=-1,m}else if(c.avail_in===0&&q(U)<=q(L)&&U!==b)return tt(c,-5);if(z.status===666&&c.avail_in!==0)return tt(c,-5);if(c.avail_in!==0||z.lookahead!==0||U!==f&&z.status!==666){var W=z.strategy===2?function(B,G){for(var H;;){if(B.lookahead===0&&(ot(B),B.lookahead===0)){if(G===f)return w;break}if(B.match_length=0,H=o._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++,H&&(D(B,!1),B.strm.avail_out===0))return w}return B.insert=0,G===b?(D(B,!0),B.strm.avail_out===0?J:P):B.last_lit&&(D(B,!1),B.strm.avail_out===0)?w:F}(z,U):z.strategy===3?function(B,G){for(var H,K,et,ht,at=B.window;;){if(B.lookahead<=k){if(ot(B),B.lookahead<=k&&G===f)return w;if(B.lookahead===0)break}if(B.match_length=0,B.lookahead>=N&&0<B.strstart&&(K=at[et=B.strstart-1])===at[++et]&&K===at[++et]&&K===at[++et]){ht=B.strstart+k;do;while(K===at[++et]&&K===at[++et]&&K===at[++et]&&K===at[++et]&&K===at[++et]&&K===at[++et]&&K===at[++et]&&K===at[++et]&&et<ht);B.match_length=k-(ht-et),B.match_length>B.lookahead&&(B.match_length=B.lookahead)}if(B.match_length>=N?(H=o._tr_tally(B,1,B.match_length-N),B.lookahead-=B.match_length,B.strstart+=B.match_length,B.match_length=0):(H=o._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++),H&&(D(B,!1),B.strm.avail_out===0))return w}return B.insert=0,G===b?(D(B,!0),B.strm.avail_out===0?J:P):B.last_lit&&(D(B,!1),B.strm.avail_out===0)?w:F}(z,U):s[z.level].func(z,U);if(W!==J&&W!==P||(z.status=666),W===w||W===J)return c.avail_out===0&&(z.last_flush=-1),m;if(W===F&&(U===1?o._tr_align(z):U!==5&&(o._tr_stored_block(z,0,0,!1),U===3&&(Q(z.head),z.lookahead===0&&(z.strstart=0,z.block_start=0,z.insert=0))),A(c),c.avail_out===0))return z.last_flush=-1,m}return U!==b?m:z.wrap<=0?1:(z.wrap===2?(V(z,255&c.adler),V(z,c.adler>>8&255),V(z,c.adler>>16&255),V(z,c.adler>>24&255),V(z,255&c.total_in),V(z,c.total_in>>8&255),V(z,c.total_in>>16&255),V(z,c.total_in>>24&255)):(Y(z,c.adler>>>16),Y(z,65535&c.adler)),A(c),0<z.wrap&&(z.wrap=-z.wrap),z.pending!==0?m:1)},r.deflateEnd=function(c){var U;return c&&c.state?(U=c.state.status)!==x&&U!==69&&U!==73&&U!==91&&U!==103&&U!==C&&U!==666?tt(c,y):(c.state=null,U===C?tt(c,-3):m):y},r.deflateSetDictionary=function(c,U){var L,z,S,R,$,W,B,G,H=U.length;if(!c||!c.state||(R=(L=c.state).wrap)===2||R===1&&L.status!==x||L.lookahead)return y;for(R===1&&(c.adler=l(c.adler,U,H,0)),L.wrap=0,H>=L.w_size&&(R===0&&(Q(L.head),L.strstart=0,L.block_start=0,L.insert=0),G=new a.Buf8(L.w_size),a.arraySet(G,U,H-L.w_size,L.w_size,0),U=G,H=L.w_size),$=c.avail_in,W=c.next_in,B=c.input,c.avail_in=H,c.next_in=0,c.input=U,ot(L);L.lookahead>=N;){for(z=L.strstart,S=L.lookahead-(N-1);L.ins_h=(L.ins_h<<L.hash_shift^L.window[z+N-1])&L.hash_mask,L.prev[z&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=z,z++,--S;);L.strstart=z,L.lookahead=N-1,ot(L)}return L.strstart+=L.lookahead,L.block_start=L.strstart,L.insert=L.lookahead,L.lookahead=0,L.match_length=L.prev_length=N-1,L.match_available=0,c.next_in=W,c.input=B,c.avail_in=$,L.wrap=R,m},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){t.exports=function(s,a){var o,l,u,p,f,b,m,y,d,_,h,g,v,E,M,j,I,T,N,k,O,x,C,w,F;o=s.state,l=s.next_in,w=s.input,u=l+(s.avail_in-5),p=s.next_out,F=s.output,f=p-(a-s.avail_out),b=p+(s.avail_out-257),m=o.dmax,y=o.wsize,d=o.whave,_=o.wnext,h=o.window,g=o.hold,v=o.bits,E=o.lencode,M=o.distcode,j=(1<<o.lenbits)-1,I=(1<<o.distbits)-1;t:do{v<15&&(g+=w[l++]<<v,v+=8,g+=w[l++]<<v,v+=8),T=E[g&j];e:for(;;){if(g>>>=N=T>>>24,v-=N,(N=T>>>16&255)===0)F[p++]=65535&T;else{if(!(16&N)){if(!(64&N)){T=E[(65535&T)+(g&(1<<N)-1)];continue e}if(32&N){o.mode=12;break t}s.msg="invalid literal/length code",o.mode=30;break t}k=65535&T,(N&=15)&&(v<N&&(g+=w[l++]<<v,v+=8),k+=g&(1<<N)-1,g>>>=N,v-=N),v<15&&(g+=w[l++]<<v,v+=8,g+=w[l++]<<v,v+=8),T=M[g&I];r:for(;;){if(g>>>=N=T>>>24,v-=N,!(16&(N=T>>>16&255))){if(!(64&N)){T=M[(65535&T)+(g&(1<<N)-1)];continue r}s.msg="invalid distance code",o.mode=30;break t}if(O=65535&T,v<(N&=15)&&(g+=w[l++]<<v,(v+=8)<N&&(g+=w[l++]<<v,v+=8)),m<(O+=g&(1<<N)-1)){s.msg="invalid distance too far back",o.mode=30;break t}if(g>>>=N,v-=N,(N=p-f)<O){if(d<(N=O-N)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break t}if(C=h,(x=0)===_){if(x+=y-N,N<k){for(k-=N;F[p++]=h[x++],--N;);x=p-O,C=F}}else if(_<N){if(x+=y+_-N,(N-=_)<k){for(k-=N;F[p++]=h[x++],--N;);if(x=0,_<k){for(k-=N=_;F[p++]=h[x++],--N;);x=p-O,C=F}}}else if(x+=_-N,N<k){for(k-=N;F[p++]=h[x++],--N;);x=p-O,C=F}for(;2<k;)F[p++]=C[x++],F[p++]=C[x++],F[p++]=C[x++],k-=3;k&&(F[p++]=C[x++],1<k&&(F[p++]=C[x++]))}else{for(x=p-O;F[p++]=F[x++],F[p++]=F[x++],F[p++]=F[x++],2<(k-=3););k&&(F[p++]=F[x++],1<k&&(F[p++]=F[x++]))}break}}break}}while(l<u&&p<b);l-=k=v>>3,g&=(1<<(v-=k<<3))-1,s.next_in=l,s.next_out=p,s.avail_in=l<u?u-l+5:5-(l-u),s.avail_out=p<b?b-p+257:257-(p-b),o.hold=g,o.bits=v}},{}],49:[function(e,t,r){var s=e("../utils/common"),a=e("./adler32"),o=e("./crc32"),l=e("./inffast"),u=e("./inftrees"),p=1,f=2,b=0,m=-2,y=1,d=852,_=592;function h(x){return(x>>>24&255)+(x>>>8&65280)+((65280&x)<<8)+((255&x)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(x){var C;return x&&x.state?(C=x.state,x.total_in=x.total_out=C.total=0,x.msg="",C.wrap&&(x.adler=1&C.wrap),C.mode=y,C.last=0,C.havedict=0,C.dmax=32768,C.head=null,C.hold=0,C.bits=0,C.lencode=C.lendyn=new s.Buf32(d),C.distcode=C.distdyn=new s.Buf32(_),C.sane=1,C.back=-1,b):m}function E(x){var C;return x&&x.state?((C=x.state).wsize=0,C.whave=0,C.wnext=0,v(x)):m}function M(x,C){var w,F;return x&&x.state?(F=x.state,C<0?(w=0,C=-C):(w=1+(C>>4),C<48&&(C&=15)),C&&(C<8||15<C)?m:(F.window!==null&&F.wbits!==C&&(F.window=null),F.wrap=w,F.wbits=C,E(x))):m}function j(x,C){var w,F;return x?(F=new g,(x.state=F).window=null,(w=M(x,C))!==b&&(x.state=null),w):m}var I,T,N=!0;function k(x){if(N){var C;for(I=new s.Buf32(512),T=new s.Buf32(32),C=0;C<144;)x.lens[C++]=8;for(;C<256;)x.lens[C++]=9;for(;C<280;)x.lens[C++]=7;for(;C<288;)x.lens[C++]=8;for(u(p,x.lens,0,288,I,0,x.work,{bits:9}),C=0;C<32;)x.lens[C++]=5;u(f,x.lens,0,32,T,0,x.work,{bits:5}),N=!1}x.lencode=I,x.lenbits=9,x.distcode=T,x.distbits=5}function O(x,C,w,F){var J,P=x.state;return P.window===null&&(P.wsize=1<<P.wbits,P.wnext=0,P.whave=0,P.window=new s.Buf8(P.wsize)),F>=P.wsize?(s.arraySet(P.window,C,w-P.wsize,P.wsize,0),P.wnext=0,P.whave=P.wsize):(F<(J=P.wsize-P.wnext)&&(J=F),s.arraySet(P.window,C,w-F,J,P.wnext),(F-=J)?(s.arraySet(P.window,C,w-F,F,0),P.wnext=F,P.whave=P.wsize):(P.wnext+=J,P.wnext===P.wsize&&(P.wnext=0),P.whave<P.wsize&&(P.whave+=J))),0}r.inflateReset=E,r.inflateReset2=M,r.inflateResetKeep=v,r.inflateInit=function(x){return j(x,15)},r.inflateInit2=j,r.inflate=function(x,C){var w,F,J,P,tt,q,Q,A,D,V,Y,Z,ot,st,it,lt,mt,ct,xt,_t,c,U,L,z,S=0,R=new s.Buf8(4),$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!x||!x.state||!x.output||!x.input&&x.avail_in!==0)return m;(w=x.state).mode===12&&(w.mode=13),tt=x.next_out,J=x.output,Q=x.avail_out,P=x.next_in,F=x.input,q=x.avail_in,A=w.hold,D=w.bits,V=q,Y=Q,U=b;t:for(;;)switch(w.mode){case y:if(w.wrap===0){w.mode=13;break}for(;D<16;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}if(2&w.wrap&&A===35615){R[w.check=0]=255&A,R[1]=A>>>8&255,w.check=o(w.check,R,2,0),D=A=0,w.mode=2;break}if(w.flags=0,w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&A)<<8)+(A>>8))%31){x.msg="incorrect header check",w.mode=30;break}if((15&A)!=8){x.msg="unknown compression method",w.mode=30;break}if(D-=4,c=8+(15&(A>>>=4)),w.wbits===0)w.wbits=c;else if(c>w.wbits){x.msg="invalid window size",w.mode=30;break}w.dmax=1<<c,x.adler=w.check=1,w.mode=512&A?10:12,D=A=0;break;case 2:for(;D<16;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}if(w.flags=A,(255&w.flags)!=8){x.msg="unknown compression method",w.mode=30;break}if(57344&w.flags){x.msg="unknown header flags set",w.mode=30;break}w.head&&(w.head.text=A>>8&1),512&w.flags&&(R[0]=255&A,R[1]=A>>>8&255,w.check=o(w.check,R,2,0)),D=A=0,w.mode=3;case 3:for(;D<32;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}w.head&&(w.head.time=A),512&w.flags&&(R[0]=255&A,R[1]=A>>>8&255,R[2]=A>>>16&255,R[3]=A>>>24&255,w.check=o(w.check,R,4,0)),D=A=0,w.mode=4;case 4:for(;D<16;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}w.head&&(w.head.xflags=255&A,w.head.os=A>>8),512&w.flags&&(R[0]=255&A,R[1]=A>>>8&255,w.check=o(w.check,R,2,0)),D=A=0,w.mode=5;case 5:if(1024&w.flags){for(;D<16;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}w.length=A,w.head&&(w.head.extra_len=A),512&w.flags&&(R[0]=255&A,R[1]=A>>>8&255,w.check=o(w.check,R,2,0)),D=A=0}else w.head&&(w.head.extra=null);w.mode=6;case 6:if(1024&w.flags&&(q<(Z=w.length)&&(Z=q),Z&&(w.head&&(c=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),s.arraySet(w.head.extra,F,P,Z,c)),512&w.flags&&(w.check=o(w.check,F,Z,P)),q-=Z,P+=Z,w.length-=Z),w.length))break t;w.length=0,w.mode=7;case 7:if(2048&w.flags){if(q===0)break t;for(Z=0;c=F[P+Z++],w.head&&c&&w.length<65536&&(w.head.name+=String.fromCharCode(c)),c&&Z<q;);if(512&w.flags&&(w.check=o(w.check,F,Z,P)),q-=Z,P+=Z,c)break t}else w.head&&(w.head.name=null);w.length=0,w.mode=8;case 8:if(4096&w.flags){if(q===0)break t;for(Z=0;c=F[P+Z++],w.head&&c&&w.length<65536&&(w.head.comment+=String.fromCharCode(c)),c&&Z<q;);if(512&w.flags&&(w.check=o(w.check,F,Z,P)),q-=Z,P+=Z,c)break t}else w.head&&(w.head.comment=null);w.mode=9;case 9:if(512&w.flags){for(;D<16;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}if(A!==(65535&w.check)){x.msg="header crc mismatch",w.mode=30;break}D=A=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),x.adler=w.check=0,w.mode=12;break;case 10:for(;D<32;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}x.adler=w.check=h(A),D=A=0,w.mode=11;case 11:if(w.havedict===0)return x.next_out=tt,x.avail_out=Q,x.next_in=P,x.avail_in=q,w.hold=A,w.bits=D,2;x.adler=w.check=1,w.mode=12;case 12:if(C===5||C===6)break t;case 13:if(w.last){A>>>=7&D,D-=7&D,w.mode=27;break}for(;D<3;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}switch(w.last=1&A,D-=1,3&(A>>>=1)){case 0:w.mode=14;break;case 1:if(k(w),w.mode=20,C!==6)break;A>>>=2,D-=2;break t;case 2:w.mode=17;break;case 3:x.msg="invalid block type",w.mode=30}A>>>=2,D-=2;break;case 14:for(A>>>=7&D,D-=7&D;D<32;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}if((65535&A)!=(A>>>16^65535)){x.msg="invalid stored block lengths",w.mode=30;break}if(w.length=65535&A,D=A=0,w.mode=15,C===6)break t;case 15:w.mode=16;case 16:if(Z=w.length){if(q<Z&&(Z=q),Q<Z&&(Z=Q),Z===0)break t;s.arraySet(J,F,P,Z,tt),q-=Z,P+=Z,Q-=Z,tt+=Z,w.length-=Z;break}w.mode=12;break;case 17:for(;D<14;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}if(w.nlen=257+(31&A),A>>>=5,D-=5,w.ndist=1+(31&A),A>>>=5,D-=5,w.ncode=4+(15&A),A>>>=4,D-=4,286<w.nlen||30<w.ndist){x.msg="too many length or distance symbols",w.mode=30;break}w.have=0,w.mode=18;case 18:for(;w.have<w.ncode;){for(;D<3;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}w.lens[$[w.have++]]=7&A,A>>>=3,D-=3}for(;w.have<19;)w.lens[$[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,L={bits:w.lenbits},U=u(0,w.lens,0,19,w.lencode,0,w.work,L),w.lenbits=L.bits,U){x.msg="invalid code lengths set",w.mode=30;break}w.have=0,w.mode=19;case 19:for(;w.have<w.nlen+w.ndist;){for(;lt=(S=w.lencode[A&(1<<w.lenbits)-1])>>>16&255,mt=65535&S,!((it=S>>>24)<=D);){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}if(mt<16)A>>>=it,D-=it,w.lens[w.have++]=mt;else{if(mt===16){for(z=it+2;D<z;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}if(A>>>=it,D-=it,w.have===0){x.msg="invalid bit length repeat",w.mode=30;break}c=w.lens[w.have-1],Z=3+(3&A),A>>>=2,D-=2}else if(mt===17){for(z=it+3;D<z;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}D-=it,c=0,Z=3+(7&(A>>>=it)),A>>>=3,D-=3}else{for(z=it+7;D<z;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}D-=it,c=0,Z=11+(127&(A>>>=it)),A>>>=7,D-=7}if(w.have+Z>w.nlen+w.ndist){x.msg="invalid bit length repeat",w.mode=30;break}for(;Z--;)w.lens[w.have++]=c}}if(w.mode===30)break;if(w.lens[256]===0){x.msg="invalid code -- missing end-of-block",w.mode=30;break}if(w.lenbits=9,L={bits:w.lenbits},U=u(p,w.lens,0,w.nlen,w.lencode,0,w.work,L),w.lenbits=L.bits,U){x.msg="invalid literal/lengths set",w.mode=30;break}if(w.distbits=6,w.distcode=w.distdyn,L={bits:w.distbits},U=u(f,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,L),w.distbits=L.bits,U){x.msg="invalid distances set",w.mode=30;break}if(w.mode=20,C===6)break t;case 20:w.mode=21;case 21:if(6<=q&&258<=Q){x.next_out=tt,x.avail_out=Q,x.next_in=P,x.avail_in=q,w.hold=A,w.bits=D,l(x,Y),tt=x.next_out,J=x.output,Q=x.avail_out,P=x.next_in,F=x.input,q=x.avail_in,A=w.hold,D=w.bits,w.mode===12&&(w.back=-1);break}for(w.back=0;lt=(S=w.lencode[A&(1<<w.lenbits)-1])>>>16&255,mt=65535&S,!((it=S>>>24)<=D);){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}if(lt&&!(240&lt)){for(ct=it,xt=lt,_t=mt;lt=(S=w.lencode[_t+((A&(1<<ct+xt)-1)>>ct)])>>>16&255,mt=65535&S,!(ct+(it=S>>>24)<=D);){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}A>>>=ct,D-=ct,w.back+=ct}if(A>>>=it,D-=it,w.back+=it,w.length=mt,lt===0){w.mode=26;break}if(32&lt){w.back=-1,w.mode=12;break}if(64&lt){x.msg="invalid literal/length code",w.mode=30;break}w.extra=15&lt,w.mode=22;case 22:if(w.extra){for(z=w.extra;D<z;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}w.length+=A&(1<<w.extra)-1,A>>>=w.extra,D-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=23;case 23:for(;lt=(S=w.distcode[A&(1<<w.distbits)-1])>>>16&255,mt=65535&S,!((it=S>>>24)<=D);){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}if(!(240&lt)){for(ct=it,xt=lt,_t=mt;lt=(S=w.distcode[_t+((A&(1<<ct+xt)-1)>>ct)])>>>16&255,mt=65535&S,!(ct+(it=S>>>24)<=D);){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}A>>>=ct,D-=ct,w.back+=ct}if(A>>>=it,D-=it,w.back+=it,64&lt){x.msg="invalid distance code",w.mode=30;break}w.offset=mt,w.extra=15&lt,w.mode=24;case 24:if(w.extra){for(z=w.extra;D<z;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}w.offset+=A&(1<<w.extra)-1,A>>>=w.extra,D-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){x.msg="invalid distance too far back",w.mode=30;break}w.mode=25;case 25:if(Q===0)break t;if(Z=Y-Q,w.offset>Z){if((Z=w.offset-Z)>w.whave&&w.sane){x.msg="invalid distance too far back",w.mode=30;break}ot=Z>w.wnext?(Z-=w.wnext,w.wsize-Z):w.wnext-Z,Z>w.length&&(Z=w.length),st=w.window}else st=J,ot=tt-w.offset,Z=w.length;for(Q<Z&&(Z=Q),Q-=Z,w.length-=Z;J[tt++]=st[ot++],--Z;);w.length===0&&(w.mode=21);break;case 26:if(Q===0)break t;J[tt++]=w.length,Q--,w.mode=21;break;case 27:if(w.wrap){for(;D<32;){if(q===0)break t;q--,A|=F[P++]<<D,D+=8}if(Y-=Q,x.total_out+=Y,w.total+=Y,Y&&(x.adler=w.check=w.flags?o(w.check,J,Y,tt-Y):a(w.check,J,Y,tt-Y)),Y=Q,(w.flags?A:h(A))!==w.check){x.msg="incorrect data check",w.mode=30;break}D=A=0}w.mode=28;case 28:if(w.wrap&&w.flags){for(;D<32;){if(q===0)break t;q--,A+=F[P++]<<D,D+=8}if(A!==(4294967295&w.total)){x.msg="incorrect length check",w.mode=30;break}D=A=0}w.mode=29;case 29:U=1;break t;case 30:U=-3;break t;case 31:return-4;case 32:default:return m}return x.next_out=tt,x.avail_out=Q,x.next_in=P,x.avail_in=q,w.hold=A,w.bits=D,(w.wsize||Y!==x.avail_out&&w.mode<30&&(w.mode<27||C!==4))&&O(x,x.output,x.next_out,Y-x.avail_out)?(w.mode=31,-4):(V-=x.avail_in,Y-=x.avail_out,x.total_in+=V,x.total_out+=Y,w.total+=Y,w.wrap&&Y&&(x.adler=w.check=w.flags?o(w.check,J,Y,x.next_out-Y):a(w.check,J,Y,x.next_out-Y)),x.data_type=w.bits+(w.last?64:0)+(w.mode===12?128:0)+(w.mode===20||w.mode===15?256:0),(V==0&&Y===0||C===4)&&U===b&&(U=-5),U)},r.inflateEnd=function(x){if(!x||!x.state)return m;var C=x.state;return C.window&&(C.window=null),x.state=null,b},r.inflateGetHeader=function(x,C){var w;return x&&x.state&&2&(w=x.state).wrap?((w.head=C).done=!1,b):m},r.inflateSetDictionary=function(x,C){var w,F=C.length;return x&&x.state?(w=x.state).wrap!==0&&w.mode!==11?m:w.mode===11&&a(1,C,F,0)!==w.check?-3:O(x,C,F,F)?(w.mode=31,-4):(w.havedict=1,b):m},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){var s=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(p,f,b,m,y,d,_,h){var g,v,E,M,j,I,T,N,k,O=h.bits,x=0,C=0,w=0,F=0,J=0,P=0,tt=0,q=0,Q=0,A=0,D=null,V=0,Y=new s.Buf16(16),Z=new s.Buf16(16),ot=null,st=0;for(x=0;x<=15;x++)Y[x]=0;for(C=0;C<m;C++)Y[f[b+C]]++;for(J=O,F=15;1<=F&&Y[F]===0;F--);if(F<J&&(J=F),F===0)return y[d++]=20971520,y[d++]=20971520,h.bits=1,0;for(w=1;w<F&&Y[w]===0;w++);for(J<w&&(J=w),x=q=1;x<=15;x++)if(q<<=1,(q-=Y[x])<0)return-1;if(0<q&&(p===0||F!==1))return-1;for(Z[1]=0,x=1;x<15;x++)Z[x+1]=Z[x]+Y[x];for(C=0;C<m;C++)f[b+C]!==0&&(_[Z[f[b+C]]++]=C);if(I=p===0?(D=ot=_,19):p===1?(D=a,V-=257,ot=o,st-=257,256):(D=l,ot=u,-1),x=w,j=d,tt=C=A=0,E=-1,M=(Q=1<<(P=J))-1,p===1&&852<Q||p===2&&592<Q)return 1;for(;;){for(T=x-tt,k=_[C]<I?(N=0,_[C]):_[C]>I?(N=ot[st+_[C]],D[V+_[C]]):(N=96,0),g=1<<x-tt,w=v=1<<P;y[j+(A>>tt)+(v-=g)]=T<<24|N<<16|k|0,v!==0;);for(g=1<<x-1;A&g;)g>>=1;if(g!==0?(A&=g-1,A+=g):A=0,C++,--Y[x]==0){if(x===F)break;x=f[b+_[C]]}if(J<x&&(A&M)!==E){for(tt===0&&(tt=J),j+=w,q=1<<(P=x-tt);P+tt<F&&!((q-=Y[P+tt])<=0);)P++,q<<=1;if(Q+=1<<P,p===1&&852<Q||p===2&&592<Q)return 1;y[E=A&M]=J<<24|P<<16|j-d|0}}return A!==0&&(y[j+A]=x-tt<<24|64<<16|0),h.bits=J,0}},{"../utils/common":41}],51:[function(e,t,r){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){var s=e("../utils/common"),a=0,o=1;function l(S){for(var R=S.length;0<=--R;)S[R]=0}var u=0,p=29,f=256,b=f+1+p,m=30,y=19,d=2*b+1,_=15,h=16,g=7,v=256,E=16,M=17,j=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=new Array(2*(b+2));l(O);var x=new Array(2*m);l(x);var C=new Array(512);l(C);var w=new Array(256);l(w);var F=new Array(p);l(F);var J,P,tt,q=new Array(m);function Q(S,R,$,W,B){this.static_tree=S,this.extra_bits=R,this.extra_base=$,this.elems=W,this.max_length=B,this.has_stree=S&&S.length}function A(S,R){this.dyn_tree=S,this.max_code=0,this.stat_desc=R}function D(S){return S<256?C[S]:C[256+(S>>>7)]}function V(S,R){S.pending_buf[S.pending++]=255&R,S.pending_buf[S.pending++]=R>>>8&255}function Y(S,R,$){S.bi_valid>h-$?(S.bi_buf|=R<<S.bi_valid&65535,V(S,S.bi_buf),S.bi_buf=R>>h-S.bi_valid,S.bi_valid+=$-h):(S.bi_buf|=R<<S.bi_valid&65535,S.bi_valid+=$)}function Z(S,R,$){Y(S,$[2*R],$[2*R+1])}function ot(S,R){for(var $=0;$|=1&S,S>>>=1,$<<=1,0<--R;);return $>>>1}function st(S,R,$){var W,B,G=new Array(_+1),H=0;for(W=1;W<=_;W++)G[W]=H=H+$[W-1]<<1;for(B=0;B<=R;B++){var K=S[2*B+1];K!==0&&(S[2*B]=ot(G[K]++,K))}}function it(S){var R;for(R=0;R<b;R++)S.dyn_ltree[2*R]=0;for(R=0;R<m;R++)S.dyn_dtree[2*R]=0;for(R=0;R<y;R++)S.bl_tree[2*R]=0;S.dyn_ltree[2*v]=1,S.opt_len=S.static_len=0,S.last_lit=S.matches=0}function lt(S){8<S.bi_valid?V(S,S.bi_buf):0<S.bi_valid&&(S.pending_buf[S.pending++]=S.bi_buf),S.bi_buf=0,S.bi_valid=0}function mt(S,R,$,W){var B=2*R,G=2*$;return S[B]<S[G]||S[B]===S[G]&&W[R]<=W[$]}function ct(S,R,$){for(var W=S.heap[$],B=$<<1;B<=S.heap_len&&(B<S.heap_len&&mt(R,S.heap[B+1],S.heap[B],S.depth)&&B++,!mt(R,W,S.heap[B],S.depth));)S.heap[$]=S.heap[B],$=B,B<<=1;S.heap[$]=W}function xt(S,R,$){var W,B,G,H,K=0;if(S.last_lit!==0)for(;W=S.pending_buf[S.d_buf+2*K]<<8|S.pending_buf[S.d_buf+2*K+1],B=S.pending_buf[S.l_buf+K],K++,W===0?Z(S,B,R):(Z(S,(G=w[B])+f+1,R),(H=I[G])!==0&&Y(S,B-=F[G],H),Z(S,G=D(--W),$),(H=T[G])!==0&&Y(S,W-=q[G],H)),K<S.last_lit;);Z(S,v,R)}function _t(S,R){var $,W,B,G=R.dyn_tree,H=R.stat_desc.static_tree,K=R.stat_desc.has_stree,et=R.stat_desc.elems,ht=-1;for(S.heap_len=0,S.heap_max=d,$=0;$<et;$++)G[2*$]!==0?(S.heap[++S.heap_len]=ht=$,S.depth[$]=0):G[2*$+1]=0;for(;S.heap_len<2;)G[2*(B=S.heap[++S.heap_len]=ht<2?++ht:0)]=1,S.depth[B]=0,S.opt_len--,K&&(S.static_len-=H[2*B+1]);for(R.max_code=ht,$=S.heap_len>>1;1<=$;$--)ct(S,G,$);for(B=et;$=S.heap[1],S.heap[1]=S.heap[S.heap_len--],ct(S,G,1),W=S.heap[1],S.heap[--S.heap_max]=$,S.heap[--S.heap_max]=W,G[2*B]=G[2*$]+G[2*W],S.depth[B]=(S.depth[$]>=S.depth[W]?S.depth[$]:S.depth[W])+1,G[2*$+1]=G[2*W+1]=B,S.heap[1]=B++,ct(S,G,1),2<=S.heap_len;);S.heap[--S.heap_max]=S.heap[1],function(at,St){var Qt,Rt,Ht,dt,be,Te,Ot=St.dyn_tree,wr=St.max_code,is=St.stat_desc.static_tree,os=St.stat_desc.has_stree,as=St.stat_desc.extra_bits,yr=St.stat_desc.extra_base,te=St.stat_desc.max_length,_e=0;for(dt=0;dt<=_;dt++)at.bl_count[dt]=0;for(Ot[2*at.heap[at.heap_max]+1]=0,Qt=at.heap_max+1;Qt<d;Qt++)te<(dt=Ot[2*Ot[2*(Rt=at.heap[Qt])+1]+1]+1)&&(dt=te,_e++),Ot[2*Rt+1]=dt,wr<Rt||(at.bl_count[dt]++,be=0,yr<=Rt&&(be=as[Rt-yr]),Te=Ot[2*Rt],at.opt_len+=Te*(dt+be),os&&(at.static_len+=Te*(is[2*Rt+1]+be)));if(_e!==0){do{for(dt=te-1;at.bl_count[dt]===0;)dt--;at.bl_count[dt]--,at.bl_count[dt+1]+=2,at.bl_count[te]--,_e-=2}while(0<_e);for(dt=te;dt!==0;dt--)for(Rt=at.bl_count[dt];Rt!==0;)wr<(Ht=at.heap[--Qt])||(Ot[2*Ht+1]!==dt&&(at.opt_len+=(dt-Ot[2*Ht+1])*Ot[2*Ht],Ot[2*Ht+1]=dt),Rt--)}}(S,R),st(G,ht,S.bl_count)}function c(S,R,$){var W,B,G=-1,H=R[1],K=0,et=7,ht=4;for(H===0&&(et=138,ht=3),R[2*($+1)+1]=65535,W=0;W<=$;W++)B=H,H=R[2*(W+1)+1],++K<et&&B===H||(K<ht?S.bl_tree[2*B]+=K:B!==0?(B!==G&&S.bl_tree[2*B]++,S.bl_tree[2*E]++):K<=10?S.bl_tree[2*M]++:S.bl_tree[2*j]++,G=B,ht=(K=0)===H?(et=138,3):B===H?(et=6,3):(et=7,4))}function U(S,R,$){var W,B,G=-1,H=R[1],K=0,et=7,ht=4;for(H===0&&(et=138,ht=3),W=0;W<=$;W++)if(B=H,H=R[2*(W+1)+1],!(++K<et&&B===H)){if(K<ht)for(;Z(S,B,S.bl_tree),--K!=0;);else B!==0?(B!==G&&(Z(S,B,S.bl_tree),K--),Z(S,E,S.bl_tree),Y(S,K-3,2)):K<=10?(Z(S,M,S.bl_tree),Y(S,K-3,3)):(Z(S,j,S.bl_tree),Y(S,K-11,7));G=B,ht=(K=0)===H?(et=138,3):B===H?(et=6,3):(et=7,4)}}l(q);var L=!1;function z(S,R,$,W){Y(S,(u<<1)+(W?1:0),3),function(B,G,H,K){lt(B),K&&(V(B,H),V(B,~H)),s.arraySet(B.pending_buf,B.window,G,H,B.pending),B.pending+=H}(S,R,$,!0)}r._tr_init=function(S){L||(function(){var R,$,W,B,G,H=new Array(_+1);for(B=W=0;B<p-1;B++)for(F[B]=W,R=0;R<1<<I[B];R++)w[W++]=B;for(w[W-1]=B,B=G=0;B<16;B++)for(q[B]=G,R=0;R<1<<T[B];R++)C[G++]=B;for(G>>=7;B<m;B++)for(q[B]=G<<7,R=0;R<1<<T[B]-7;R++)C[256+G++]=B;for($=0;$<=_;$++)H[$]=0;for(R=0;R<=143;)O[2*R+1]=8,R++,H[8]++;for(;R<=255;)O[2*R+1]=9,R++,H[9]++;for(;R<=279;)O[2*R+1]=7,R++,H[7]++;for(;R<=287;)O[2*R+1]=8,R++,H[8]++;for(st(O,b+1,H),R=0;R<m;R++)x[2*R+1]=5,x[2*R]=ot(R,5);J=new Q(O,I,f+1,b,_),P=new Q(x,T,0,m,_),tt=new Q(new Array(0),N,0,y,g)}(),L=!0),S.l_desc=new A(S.dyn_ltree,J),S.d_desc=new A(S.dyn_dtree,P),S.bl_desc=new A(S.bl_tree,tt),S.bi_buf=0,S.bi_valid=0,it(S)},r._tr_stored_block=z,r._tr_flush_block=function(S,R,$,W){var B,G,H=0;0<S.level?(S.strm.data_type===2&&(S.strm.data_type=function(K){var et,ht=4093624447;for(et=0;et<=31;et++,ht>>>=1)if(1&ht&&K.dyn_ltree[2*et]!==0)return a;if(K.dyn_ltree[18]!==0||K.dyn_ltree[20]!==0||K.dyn_ltree[26]!==0)return o;for(et=32;et<f;et++)if(K.dyn_ltree[2*et]!==0)return o;return a}(S)),_t(S,S.l_desc),_t(S,S.d_desc),H=function(K){var et;for(c(K,K.dyn_ltree,K.l_desc.max_code),c(K,K.dyn_dtree,K.d_desc.max_code),_t(K,K.bl_desc),et=y-1;3<=et&&K.bl_tree[2*k[et]+1]===0;et--);return K.opt_len+=3*(et+1)+5+5+4,et}(S),B=S.opt_len+3+7>>>3,(G=S.static_len+3+7>>>3)<=B&&(B=G)):B=G=$+5,$+4<=B&&R!==-1?z(S,R,$,W):S.strategy===4||G===B?(Y(S,2+(W?1:0),3),xt(S,O,x)):(Y(S,4+(W?1:0),3),function(K,et,ht,at){var St;for(Y(K,et-257,5),Y(K,ht-1,5),Y(K,at-4,4),St=0;St<at;St++)Y(K,K.bl_tree[2*k[St]+1],3);U(K,K.dyn_ltree,et-1),U(K,K.dyn_dtree,ht-1)}(S,S.l_desc.max_code+1,S.d_desc.max_code+1,H+1),xt(S,S.dyn_ltree,S.dyn_dtree)),it(S),W&&lt(S)},r._tr_tally=function(S,R,$){return S.pending_buf[S.d_buf+2*S.last_lit]=R>>>8&255,S.pending_buf[S.d_buf+2*S.last_lit+1]=255&R,S.pending_buf[S.l_buf+S.last_lit]=255&$,S.last_lit++,R===0?S.dyn_ltree[2*$]++:(S.matches++,R--,S.dyn_ltree[2*(w[$]+f+1)]++,S.dyn_dtree[2*D(R)]++),S.last_lit===S.lit_bufsize-1},r._tr_align=function(S){Y(S,2,3),Z(S,v,O),function(R){R.bi_valid===16?(V(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):8<=R.bi_valid&&(R.pending_buf[R.pending++]=255&R.bi_buf,R.bi_buf>>=8,R.bi_valid-=8)}(S)}},{"../utils/common":41}],53:[function(e,t,r){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(s){(function(a,o){if(!a.setImmediate){var l,u,p,f,b=1,m={},y=!1,d=a.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(a);_=_&&_.setTimeout?_:a,l={}.toString.call(a.process)==="[object process]"?function(E){process.nextTick(function(){g(E)})}:function(){if(a.postMessage&&!a.importScripts){var E=!0,M=a.onmessage;return a.onmessage=function(){E=!1},a.postMessage("","*"),a.onmessage=M,E}}()?(f="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",v,!1):a.attachEvent("onmessage",v),function(E){a.postMessage(f+E,"*")}):a.MessageChannel?((p=new MessageChannel).port1.onmessage=function(E){g(E.data)},function(E){p.port2.postMessage(E)}):d&&"onreadystatechange"in d.createElement("script")?(u=d.documentElement,function(E){var M=d.createElement("script");M.onreadystatechange=function(){g(E),M.onreadystatechange=null,u.removeChild(M),M=null},u.appendChild(M)}):function(E){setTimeout(g,0,E)},_.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var M=new Array(arguments.length-1),j=0;j<M.length;j++)M[j]=arguments[j+1];var I={callback:E,args:M};return m[b]=I,l(b),b++},_.clearImmediate=h}function h(E){delete m[E]}function g(E){if(y)setTimeout(g,0,E);else{var M=m[E];if(M){y=!0;try{(function(j){var I=j.callback,T=j.args;switch(T.length){case 0:I();break;case 1:I(T[0]);break;case 2:I(T[0],T[1]);break;case 3:I(T[0],T[1],T[2]);break;default:I.apply(o,T)}})(M)}finally{h(E),y=!1}}}}function v(E){E.source===a&&typeof E.data=="string"&&E.data.indexOf(f)===0&&g(+E.data.slice(f.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Mt<"u"?Mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Nn);function Gt(i,n,e){i.prototype=n.prototype=e,e.constructor=i}function ce(i,n){var e=Object.create(i.prototype);for(var t in n)e[t]=n[t];return e}function Bt(){}var Yt=.7,de=1/Yt,qt="\\s*([+-]?\\d+)\\s*",Kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",On=/^#([0-9a-f]{3,8})$/,Dn=new RegExp(`^rgb\\(${qt},${qt},${qt}\\)$`),Bn=new RegExp(`^rgb\\(${Ct},${Ct},${Ct}\\)$`),An=new RegExp(`^rgba\\(${qt},${qt},${qt},${Kt}\\)$`),Fn=new RegExp(`^rgba\\(${Ct},${Ct},${Ct},${Kt}\\)$`),Ln=new RegExp(`^hsl\\(${Kt},${Ct},${Ct}\\)$`),Pn=new RegExp(`^hsla\\(${Kt},${Ct},${Ct},${Kt}\\)$`),He={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gt(Bt,ze,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:tr,formatHex:tr,formatHex8:Un,formatHsl:$n,formatRgb:er,toString:er});function tr(){return this.rgb().formatHex()}function Un(){return this.rgb().formatHex8()}function $n(){return ar(this).formatHsl()}function er(){return this.rgb().formatRgb()}function ze(i){var n,e;return i=(i+"").trim().toLowerCase(),(n=On.exec(i))?(e=n[1].length,n=parseInt(n[1],16),e===6?rr(n):e===3?new gt(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?pe(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?pe(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Dn.exec(i))?new gt(n[1],n[2],n[3],1):(n=Bn.exec(i))?new gt(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=An.exec(i))?pe(n[1],n[2],n[3],n[4]):(n=Fn.exec(i))?pe(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Ln.exec(i))?or(n[1],n[2]/100,n[3]/100,1):(n=Pn.exec(i))?or(n[1],n[2]/100,n[3]/100,n[4]):He.hasOwnProperty(i)?rr(He[i]):i==="transparent"?new gt(NaN,NaN,NaN,0):null}function rr(i){return new gt(i>>16&255,i>>8&255,i&255,1)}function pe(i,n,e,t){return t<=0&&(i=n=e=NaN),new gt(i,n,e,t)}function nr(i){return i instanceof Bt||(i=ze(i)),i?(i=i.rgb(),new gt(i.r,i.g,i.b,i.opacity)):new gt}function qn(i,n,e,t){return arguments.length===1?nr(i):new gt(i,n,e,t??1)}function gt(i,n,e,t){this.r=+i,this.g=+n,this.b=+e,this.opacity=+t}Gt(gt,qn,ce(Bt,{brighter(i){return i=i==null?de:Math.pow(de,i),new gt(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?Yt:Math.pow(Yt,i),new gt(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new gt(At(this.r),At(this.g),At(this.b),me(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sr,formatHex:sr,formatHex8:Wn,formatRgb:ir,toString:ir}));function sr(){return`#${Ft(this.r)}${Ft(this.g)}${Ft(this.b)}`}function Wn(){return`#${Ft(this.r)}${Ft(this.g)}${Ft(this.b)}${Ft((isNaN(this.opacity)?1:this.opacity)*255)}`}function ir(){const i=me(this.opacity);return`${i===1?"rgb(":"rgba("}${At(this.r)}, ${At(this.g)}, ${At(this.b)}${i===1?")":`, ${i})`}`}function me(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function At(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Ft(i){return i=At(i),(i<16?"0":"")+i.toString(16)}function or(i,n,e,t){return t<=0?i=n=e=NaN:e<=0||e>=1?i=n=NaN:n<=0&&(i=NaN),new Et(i,n,e,t)}function ar(i){if(i instanceof Et)return new Et(i.h,i.s,i.l,i.opacity);if(i instanceof Bt||(i=ze(i)),!i)return new Et;if(i instanceof Et)return i;i=i.rgb();var n=i.r/255,e=i.g/255,t=i.b/255,r=Math.min(n,e,t),s=Math.max(n,e,t),a=NaN,o=s-r,l=(s+r)/2;return o?(n===s?a=(e-t)/o+(e<t)*6:e===s?a=(t-n)/o+2:a=(n-e)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new Et(a,o,l,i.opacity)}function Zn(i,n,e,t){return arguments.length===1?ar(i):new Et(i,n,e,t??1)}function Et(i,n,e,t){this.h=+i,this.s=+n,this.l=+e,this.opacity=+t}Gt(Et,Zn,ce(Bt,{brighter(i){return i=i==null?de:Math.pow(de,i),new Et(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?Yt:Math.pow(Yt,i),new Et(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,n=isNaN(i)||isNaN(this.s)?0:this.s,e=this.l,t=e+(e<.5?e:1-e)*n,r=2*e-t;return new gt(Me(i>=240?i-240:i+120,r,t),Me(i,r,t),Me(i<120?i+240:i-120,r,t),this.opacity)},clamp(){return new Et(lr(this.h),ge(this.s),ge(this.l),me(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=me(this.opacity);return`${i===1?"hsl(":"hsla("}${lr(this.h)}, ${ge(this.s)*100}%, ${ge(this.l)*100}%${i===1?")":`, ${i})`}`}}));function lr(i){return i=(i||0)%360,i<0?i+360:i}function ge(i){return Math.max(0,Math.min(1,i||0))}function Me(i,n,e){return(i<60?n+(e-n)*i/60:i<180?e:i<240?n+(e-n)*(240-i)/60:n)*255}const Vn=Math.PI/180,Gn=180/Math.PI,we=18,hr=.96422,ur=1,fr=.82521,cr=4/29,Wt=6/29,dr=3*Wt*Wt,Yn=Wt*Wt*Wt;function pr(i){if(i instanceof It)return new It(i.l,i.a,i.b,i.opacity);if(i instanceof Nt)return gr(i);i instanceof gt||(i=nr(i));var n=je(i.r),e=je(i.g),t=je(i.b),r=Ce((.2225045*n+.7168786*e+.0606169*t)/ur),s,a;return n===e&&e===t?s=a=r:(s=Ce((.4360747*n+.3850649*e+.1430804*t)/hr),a=Ce((.0139322*n+.0971045*e+.7141733*t)/fr)),new It(116*r-16,500*(s-r),200*(r-a),i.opacity)}function Kn(i,n,e,t){return arguments.length===1?pr(i):new It(i,n,e,t??1)}function It(i,n,e,t){this.l=+i,this.a=+n,this.b=+e,this.opacity=+t}Gt(It,Kn,ce(Bt,{brighter(i){return new It(this.l+we*(i??1),this.a,this.b,this.opacity)},darker(i){return new It(this.l-we*(i??1),this.a,this.b,this.opacity)},rgb(){var i=(this.l+16)/116,n=isNaN(this.a)?i:i+this.a/500,e=isNaN(this.b)?i:i-this.b/200;return n=hr*Ie(n),i=ur*Ie(i),e=fr*Ie(e),new gt(Re(3.1338561*n-1.6168667*i-.4906146*e),Re(-.9787684*n+1.9161415*i+.033454*e),Re(.0719453*n-.2289914*i+1.4052427*e),this.opacity)}}));function Ce(i){return i>Yn?Math.pow(i,1/3):i/dr+cr}function Ie(i){return i>Wt?i*i*i:dr*(i-cr)}function Re(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function je(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Xn(i){if(i instanceof Nt)return new Nt(i.h,i.c,i.l,i.opacity);if(i instanceof It||(i=pr(i)),i.a===0&&i.b===0)return new Nt(NaN,0<i.l&&i.l<100?0:NaN,i.l,i.opacity);var n=Math.atan2(i.b,i.a)*Gn;return new Nt(n<0?n+360:n,Math.sqrt(i.a*i.a+i.b*i.b),i.l,i.opacity)}function mr(i,n,e,t){return arguments.length===1?Xn(i):new Nt(i,n,e,t??1)}function Nt(i,n,e,t){this.h=+i,this.c=+n,this.l=+e,this.opacity=+t}function gr(i){if(isNaN(i.h))return new It(i.l,0,0,i.opacity);var n=i.h*Vn;return new It(i.l,Math.cos(n)*i.c,Math.sin(n)*i.c,i.opacity)}Gt(Nt,mr,ce(Bt,{brighter(i){return new Nt(this.h,this.c,this.l+we*(i??1),this.opacity)},darker(i){return new Nt(this.h,this.c,this.l-we*(i??1),this.opacity)},rgb(){return gr(this).rgb()}}));function Xt(i,n,e){this.k=i,this.x=n,this.y=e}Xt.prototype={constructor:Xt,scale:function(i){return i===1?this:new Xt(this.k*i,this.x,this.y)},translate:function(i,n){return i===0&n===0?this:new Xt(this.k,this.x+this.k*i,this.y+this.k*n)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Xt.prototype;function Jn(i,n){if(n<1)return;const e=i.length,t=new Array(e),r=["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999","#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#bc80bd","#ccebc5","#ffed6f","#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],s=r.length;let a;if(n<=s)a=r.slice(0,n);else{const l=360/n,u=40,p=70;a=new Array(n);for(let b=0;b<n;b++)a[b]=mr((b*l+15)%360,u,p).formatHex();const f=Qn(1234);a=a.map(b=>({clr:b,sortval:f()})).sort((b,m)=>b.sortval-m.sortval).map(b=>b.clr)}for(let o=0;o<e;o++)t[o]=i[o]>=0&&i[o]<n?a[i[o]]:"#ffffff";return t}function Qn(i){return function(){i|=0,i=i+2654435769|0;var n=i^i>>>16;return n=Math.imul(n,569420461),n=n^n>>>15,n=Math.imul(n,1935289751),((n=n^n>>>15)>>>0)/4294967296}}onmessage=i=>{const n=JSON.parse(i.data);try{Hn(n.data,n.selectedSourceIndex)}catch(e){postMessage(e)}};async function Hn(i,n){const e=es(i,n);ns(e,"ward2"),i.genesetDistances[n]=e,postMessage(i)}function ts(i){const n=Object.keys(i[0]),e=["score_pvalue","score_effectsize_up","score_effectsize_down","score_effectsize_abs"].filter(l=>n.indexOf(l)!==-1),t=e.length;if(t===0){console.error(param.genelist),console.error("no score columns in genelist");return}const r=e.map(l=>l.replace("score_","")),s=i.length,a=new Array(t);let o;for(let l=0;l<t;l++){o=new Array(s);for(let u=0;u<s;u++)o[u]=i[u][e[l]];a[l]=o}return{scoreCols:e,scoreTypes:r,scores:a}}function es(i,n){const e=Date.now(),t=i.genelist,r=t.length,s=i.genelist.map(_=>_.gene),a=ts(t),o=i.genesets[n].genesets.filter(_=>_.signif===!0),l=o.length;let u,p,f,b,m;const y=new Array(l);for(let _=0;_<l;_++){u=new Array(r),f=new Set(o[_].genes);for(let h=0;h<r;h++)u[h]=f.has(s[h])?1:0;y[_]=u}const d=new Array(l);for(let _=0;_<l;_++){u=new Array(l),p=a.scoreTypes.indexOf(o[_].score_type),p===-1&&console.error("invalid/inconsistent data; score_type '"+o[_].score_type+"' at geneset '"+o[_].id+"' is not found in genelist");for(let h=0;h<l;h++)if(_==h)u[h]=1;else{b=0,m=0;for(let g=0;g<r;g++)b+=y[_][g]*a.scores[p][g],m+=y[_][g]*y[h][g]*a.scores[p][g];u[h]=m/b}d[_]=u}return console.log("distanceMatrix() took; "+(Date.now()-e)+"ms"),{genesets:o,dist:d}}function rs(i){const e=i.size;if(e<2)return;const t=Math.min(Math.ceil(e*.5),50),r=new Array(t-1);let s,a,o,l,u;for(let p=2;p<=t;p++)s=[],a=i.group(p),l=0,o=new Array(e).fill(0),a.children.forEach(f=>{const b=[];f.index!==-1?(b.push(f.index),o[f.index]=l):f.traverse(m=>{m.index!==-1&&(b.push(m.index),o[m.index]=l)}),s.push({height:f.height,indices:b}),l++}),u=Jn(o,p),r[p-2]={size:p,clusters:s,index2cluster:o,index2clusterColor:u};return r}function ns(i,n){if(i!==void 0){const e=Date.now();if(i.hclust=Qe(i.dist,{method:n}),i.hclust!==void 0)return i.sortedIndices=i.hclust.indices(),i.clusters=rs(i.hclust),i.distColumns=ss(i.dist),i.hclustColumns=Qe(i.distColumns,{method:n}),i.sortedIndicesColumns=i.hclustColumns.indices(),console.log("mycluster() took; "+(Date.now()-e)+"ms"),i}}function ss(i){const n=i.length,e=new Array(n);for(let t=0;t<n;t++){let r=new Array(n);for(let s=0;s<n;s++)r[s]=i[s][t];e[t]=r}return e}})();
